// Code generated by pulumi-language-go DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package mongodbatlas

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi-mongodbatlas/sdk/v4/go/mongodbatlas/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// `ProjectIpAccessList` provides an IP Access List entry resource. The access list grants access from IPs, CIDRs or AWS Security Groups (if VPC Peering is enabled) to clusters within the Project.
//
// > **NOTE:** Groups and projects are synonymous terms. You may find `groupId` in the official documentation.
//
// > **IMPORTANT:** When you remove an entry from the access list, existing connections from the removed address(es) may remain open for a variable amount of time. How much time passes before Atlas closes the connection depends on several factors, including how the connection was established, the particular behavior of the application or driver using the address, and the connection protocol (e.g., TCP or UDP). This is particularly important to consider when changing an existing IP address or CIDR block as they cannot be updated via the Provider (comments can however), hence a change will force the destruction and recreation of entries.
//
// > **IMPORTANT:** During creation this resource does not validate whether the specified `ipAddress`, `cidrBlock`, or `awsSecurityGroup` already exists in the project's access list (known limitation). Defining a duplicate entry will result in a successful resource creation associated to the existing entry.
//
// ## Example Usage
//
// ### Using CIDR Block
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-mongodbatlas/sdk/v4/go/mongodbatlas"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			_, err := mongodbatlas.NewProjectIpAccessList(ctx, "this", &mongodbatlas.ProjectIpAccessListArgs{
//				ProjectId: pulumi.Any(projectId),
//				CidrBlock: pulumi.String("1.2.3.4/32"),
//				Comment:   pulumi.String("cidr block test"),
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// ### Using IP Address
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-mongodbatlas/sdk/v4/go/mongodbatlas"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			_, err := mongodbatlas.NewProjectIpAccessList(ctx, "this", &mongodbatlas.ProjectIpAccessListArgs{
//				ProjectId: pulumi.Any(projectId),
//				IpAddress: pulumi.String("2.3.4.5"),
//				Comment:   pulumi.String("ip address test"),
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// ### Using an AWS Security Group
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-mongodbatlas/sdk/v4/go/mongodbatlas"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			this, err := mongodbatlas.NewNetworkContainer(ctx, "this", &mongodbatlas.NetworkContainerArgs{
//				ProjectId:      pulumi.Any(projectId),
//				AtlasCidrBlock: pulumi.String("192.168.208.0/21"),
//				ProviderName:   pulumi.String("AWS"),
//				RegionName:     pulumi.String("US_EAST_1"),
//			})
//			if err != nil {
//				return err
//			}
//			thisNetworkPeering, err := mongodbatlas.NewNetworkPeering(ctx, "this", &mongodbatlas.NetworkPeeringArgs{
//				ProjectId:           pulumi.Any(projectId),
//				ContainerId:         this.ContainerId,
//				AccepterRegionName:  pulumi.String("us-east-1"),
//				ProviderName:        pulumi.String("AWS"),
//				RouteTableCidrBlock: pulumi.String("172.31.0.0/16"),
//				VpcId:               pulumi.String("vpc-0d93d6f69f1578bd8"),
//				AwsAccountId:        pulumi.String("232589400519"),
//			})
//			if err != nil {
//				return err
//			}
//			_, err = mongodbatlas.NewProjectIpAccessList(ctx, "this", &mongodbatlas.ProjectIpAccessListArgs{
//				ProjectId:        pulumi.Any(projectId),
//				AwsSecurityGroup: pulumi.String("sg-0026348ec11780bd1"),
//				Comment:          pulumi.String("AWS Security Group test"),
//			}, pulumi.DependsOn([]pulumi.Resource{
//				thisNetworkPeering,
//			}))
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// > **IMPORTANT:** In order to use AWS Security Group(s) VPC Peering must be enabled like above example.
//
// ### Further Examples
// - Project IP Access List
//
// ## Import
//
// IP Access List entries can be imported using the `project_id` and `cidr_block` or `ip_address`, e.g.
//
// ```sh
// $ pulumi import mongodbatlas:index/projectIpAccessList:ProjectIpAccessList this 5d0f1f74cf09a29120e123cd-10.242.88.0/21
// ```
// For more information, see [MongoDB Atlas API Reference](https://docs.atlas.mongodb.com/reference/api/access-lists/).
type ProjectIpAccessList struct {
	pulumi.CustomResourceState

	// Unique identifier of the AWS security group to add to the access list. Mutually exclusive with `cidrBlock` and `ipAddress`.
	AwsSecurityGroup pulumi.StringOutput `pulumi:"awsSecurityGroup"`
	// Range of IP addresses in CIDR notation to be added to the access list. Mutually exclusive with `ipAddress` and `awsSecurityGroup`.
	CidrBlock pulumi.StringOutput `pulumi:"cidrBlock"`
	// Remark that explains the purpose or scope of this IP access list entry.
	Comment pulumi.StringOutput `pulumi:"comment"`
	// Single IP address to be added to the access list. Mutually exclusive with `cidrBlock` and `awsSecurityGroup`.
	IpAddress pulumi.StringOutput `pulumi:"ipAddress"`
	// Unique 24-hexadecimal digit string that identifies your project.
	ProjectId pulumi.StringOutput                  `pulumi:"projectId"`
	Timeouts  ProjectIpAccessListTimeoutsPtrOutput `pulumi:"timeouts"`
}

// NewProjectIpAccessList registers a new resource with the given unique name, arguments, and options.
func NewProjectIpAccessList(ctx *pulumi.Context,
	name string, args *ProjectIpAccessListArgs, opts ...pulumi.ResourceOption) (*ProjectIpAccessList, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.ProjectId == nil {
		return nil, errors.New("invalid value for required argument 'ProjectId'")
	}
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource ProjectIpAccessList
	err := ctx.RegisterResource("mongodbatlas:index/projectIpAccessList:ProjectIpAccessList", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetProjectIpAccessList gets an existing ProjectIpAccessList resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetProjectIpAccessList(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *ProjectIpAccessListState, opts ...pulumi.ResourceOption) (*ProjectIpAccessList, error) {
	var resource ProjectIpAccessList
	err := ctx.ReadResource("mongodbatlas:index/projectIpAccessList:ProjectIpAccessList", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering ProjectIpAccessList resources.
type projectIpAccessListState struct {
	// Unique identifier of the AWS security group to add to the access list. Mutually exclusive with `cidrBlock` and `ipAddress`.
	AwsSecurityGroup *string `pulumi:"awsSecurityGroup"`
	// Range of IP addresses in CIDR notation to be added to the access list. Mutually exclusive with `ipAddress` and `awsSecurityGroup`.
	CidrBlock *string `pulumi:"cidrBlock"`
	// Remark that explains the purpose or scope of this IP access list entry.
	Comment *string `pulumi:"comment"`
	// Single IP address to be added to the access list. Mutually exclusive with `cidrBlock` and `awsSecurityGroup`.
	IpAddress *string `pulumi:"ipAddress"`
	// Unique 24-hexadecimal digit string that identifies your project.
	ProjectId *string                      `pulumi:"projectId"`
	Timeouts  *ProjectIpAccessListTimeouts `pulumi:"timeouts"`
}

type ProjectIpAccessListState struct {
	// Unique identifier of the AWS security group to add to the access list. Mutually exclusive with `cidrBlock` and `ipAddress`.
	AwsSecurityGroup pulumi.StringPtrInput
	// Range of IP addresses in CIDR notation to be added to the access list. Mutually exclusive with `ipAddress` and `awsSecurityGroup`.
	CidrBlock pulumi.StringPtrInput
	// Remark that explains the purpose or scope of this IP access list entry.
	Comment pulumi.StringPtrInput
	// Single IP address to be added to the access list. Mutually exclusive with `cidrBlock` and `awsSecurityGroup`.
	IpAddress pulumi.StringPtrInput
	// Unique 24-hexadecimal digit string that identifies your project.
	ProjectId pulumi.StringPtrInput
	Timeouts  ProjectIpAccessListTimeoutsPtrInput
}

func (ProjectIpAccessListState) ElementType() reflect.Type {
	return reflect.TypeOf((*projectIpAccessListState)(nil)).Elem()
}

type projectIpAccessListArgs struct {
	// Unique identifier of the AWS security group to add to the access list. Mutually exclusive with `cidrBlock` and `ipAddress`.
	AwsSecurityGroup *string `pulumi:"awsSecurityGroup"`
	// Range of IP addresses in CIDR notation to be added to the access list. Mutually exclusive with `ipAddress` and `awsSecurityGroup`.
	CidrBlock *string `pulumi:"cidrBlock"`
	// Remark that explains the purpose or scope of this IP access list entry.
	Comment *string `pulumi:"comment"`
	// Single IP address to be added to the access list. Mutually exclusive with `cidrBlock` and `awsSecurityGroup`.
	IpAddress *string `pulumi:"ipAddress"`
	// Unique 24-hexadecimal digit string that identifies your project.
	ProjectId string                       `pulumi:"projectId"`
	Timeouts  *ProjectIpAccessListTimeouts `pulumi:"timeouts"`
}

// The set of arguments for constructing a ProjectIpAccessList resource.
type ProjectIpAccessListArgs struct {
	// Unique identifier of the AWS security group to add to the access list. Mutually exclusive with `cidrBlock` and `ipAddress`.
	AwsSecurityGroup pulumi.StringPtrInput
	// Range of IP addresses in CIDR notation to be added to the access list. Mutually exclusive with `ipAddress` and `awsSecurityGroup`.
	CidrBlock pulumi.StringPtrInput
	// Remark that explains the purpose or scope of this IP access list entry.
	Comment pulumi.StringPtrInput
	// Single IP address to be added to the access list. Mutually exclusive with `cidrBlock` and `awsSecurityGroup`.
	IpAddress pulumi.StringPtrInput
	// Unique 24-hexadecimal digit string that identifies your project.
	ProjectId pulumi.StringInput
	Timeouts  ProjectIpAccessListTimeoutsPtrInput
}

func (ProjectIpAccessListArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*projectIpAccessListArgs)(nil)).Elem()
}

type ProjectIpAccessListInput interface {
	pulumi.Input

	ToProjectIpAccessListOutput() ProjectIpAccessListOutput
	ToProjectIpAccessListOutputWithContext(ctx context.Context) ProjectIpAccessListOutput
}

func (*ProjectIpAccessList) ElementType() reflect.Type {
	return reflect.TypeOf((**ProjectIpAccessList)(nil)).Elem()
}

func (i *ProjectIpAccessList) ToProjectIpAccessListOutput() ProjectIpAccessListOutput {
	return i.ToProjectIpAccessListOutputWithContext(context.Background())
}

func (i *ProjectIpAccessList) ToProjectIpAccessListOutputWithContext(ctx context.Context) ProjectIpAccessListOutput {
	return pulumi.ToOutputWithContext(ctx, i).(ProjectIpAccessListOutput)
}

// ProjectIpAccessListArrayInput is an input type that accepts ProjectIpAccessListArray and ProjectIpAccessListArrayOutput values.
// You can construct a concrete instance of `ProjectIpAccessListArrayInput` via:
//
//	ProjectIpAccessListArray{ ProjectIpAccessListArgs{...} }
type ProjectIpAccessListArrayInput interface {
	pulumi.Input

	ToProjectIpAccessListArrayOutput() ProjectIpAccessListArrayOutput
	ToProjectIpAccessListArrayOutputWithContext(context.Context) ProjectIpAccessListArrayOutput
}

type ProjectIpAccessListArray []ProjectIpAccessListInput

func (ProjectIpAccessListArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*ProjectIpAccessList)(nil)).Elem()
}

func (i ProjectIpAccessListArray) ToProjectIpAccessListArrayOutput() ProjectIpAccessListArrayOutput {
	return i.ToProjectIpAccessListArrayOutputWithContext(context.Background())
}

func (i ProjectIpAccessListArray) ToProjectIpAccessListArrayOutputWithContext(ctx context.Context) ProjectIpAccessListArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(ProjectIpAccessListArrayOutput)
}

// ProjectIpAccessListMapInput is an input type that accepts ProjectIpAccessListMap and ProjectIpAccessListMapOutput values.
// You can construct a concrete instance of `ProjectIpAccessListMapInput` via:
//
//	ProjectIpAccessListMap{ "key": ProjectIpAccessListArgs{...} }
type ProjectIpAccessListMapInput interface {
	pulumi.Input

	ToProjectIpAccessListMapOutput() ProjectIpAccessListMapOutput
	ToProjectIpAccessListMapOutputWithContext(context.Context) ProjectIpAccessListMapOutput
}

type ProjectIpAccessListMap map[string]ProjectIpAccessListInput

func (ProjectIpAccessListMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*ProjectIpAccessList)(nil)).Elem()
}

func (i ProjectIpAccessListMap) ToProjectIpAccessListMapOutput() ProjectIpAccessListMapOutput {
	return i.ToProjectIpAccessListMapOutputWithContext(context.Background())
}

func (i ProjectIpAccessListMap) ToProjectIpAccessListMapOutputWithContext(ctx context.Context) ProjectIpAccessListMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(ProjectIpAccessListMapOutput)
}

type ProjectIpAccessListOutput struct{ *pulumi.OutputState }

func (ProjectIpAccessListOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**ProjectIpAccessList)(nil)).Elem()
}

func (o ProjectIpAccessListOutput) ToProjectIpAccessListOutput() ProjectIpAccessListOutput {
	return o
}

func (o ProjectIpAccessListOutput) ToProjectIpAccessListOutputWithContext(ctx context.Context) ProjectIpAccessListOutput {
	return o
}

// Unique identifier of the AWS security group to add to the access list. Mutually exclusive with `cidrBlock` and `ipAddress`.
func (o ProjectIpAccessListOutput) AwsSecurityGroup() pulumi.StringOutput {
	return o.ApplyT(func(v *ProjectIpAccessList) pulumi.StringOutput { return v.AwsSecurityGroup }).(pulumi.StringOutput)
}

// Range of IP addresses in CIDR notation to be added to the access list. Mutually exclusive with `ipAddress` and `awsSecurityGroup`.
func (o ProjectIpAccessListOutput) CidrBlock() pulumi.StringOutput {
	return o.ApplyT(func(v *ProjectIpAccessList) pulumi.StringOutput { return v.CidrBlock }).(pulumi.StringOutput)
}

// Remark that explains the purpose or scope of this IP access list entry.
func (o ProjectIpAccessListOutput) Comment() pulumi.StringOutput {
	return o.ApplyT(func(v *ProjectIpAccessList) pulumi.StringOutput { return v.Comment }).(pulumi.StringOutput)
}

// Single IP address to be added to the access list. Mutually exclusive with `cidrBlock` and `awsSecurityGroup`.
func (o ProjectIpAccessListOutput) IpAddress() pulumi.StringOutput {
	return o.ApplyT(func(v *ProjectIpAccessList) pulumi.StringOutput { return v.IpAddress }).(pulumi.StringOutput)
}

// Unique 24-hexadecimal digit string that identifies your project.
func (o ProjectIpAccessListOutput) ProjectId() pulumi.StringOutput {
	return o.ApplyT(func(v *ProjectIpAccessList) pulumi.StringOutput { return v.ProjectId }).(pulumi.StringOutput)
}

func (o ProjectIpAccessListOutput) Timeouts() ProjectIpAccessListTimeoutsPtrOutput {
	return o.ApplyT(func(v *ProjectIpAccessList) ProjectIpAccessListTimeoutsPtrOutput { return v.Timeouts }).(ProjectIpAccessListTimeoutsPtrOutput)
}

type ProjectIpAccessListArrayOutput struct{ *pulumi.OutputState }

func (ProjectIpAccessListArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*ProjectIpAccessList)(nil)).Elem()
}

func (o ProjectIpAccessListArrayOutput) ToProjectIpAccessListArrayOutput() ProjectIpAccessListArrayOutput {
	return o
}

func (o ProjectIpAccessListArrayOutput) ToProjectIpAccessListArrayOutputWithContext(ctx context.Context) ProjectIpAccessListArrayOutput {
	return o
}

func (o ProjectIpAccessListArrayOutput) Index(i pulumi.IntInput) ProjectIpAccessListOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *ProjectIpAccessList {
		return vs[0].([]*ProjectIpAccessList)[vs[1].(int)]
	}).(ProjectIpAccessListOutput)
}

type ProjectIpAccessListMapOutput struct{ *pulumi.OutputState }

func (ProjectIpAccessListMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*ProjectIpAccessList)(nil)).Elem()
}

func (o ProjectIpAccessListMapOutput) ToProjectIpAccessListMapOutput() ProjectIpAccessListMapOutput {
	return o
}

func (o ProjectIpAccessListMapOutput) ToProjectIpAccessListMapOutputWithContext(ctx context.Context) ProjectIpAccessListMapOutput {
	return o
}

func (o ProjectIpAccessListMapOutput) MapIndex(k pulumi.StringInput) ProjectIpAccessListOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *ProjectIpAccessList {
		return vs[0].(map[string]*ProjectIpAccessList)[vs[1].(string)]
	}).(ProjectIpAccessListOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*ProjectIpAccessListInput)(nil)).Elem(), &ProjectIpAccessList{})
	pulumi.RegisterInputType(reflect.TypeOf((*ProjectIpAccessListArrayInput)(nil)).Elem(), ProjectIpAccessListArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*ProjectIpAccessListMapInput)(nil)).Elem(), ProjectIpAccessListMap{})
	pulumi.RegisterOutputType(ProjectIpAccessListOutput{})
	pulumi.RegisterOutputType(ProjectIpAccessListArrayOutput{})
	pulumi.RegisterOutputType(ProjectIpAccessListMapOutput{})
}
