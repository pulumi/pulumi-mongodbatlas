// Code generated by pulumi-language-go DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package mongodbatlas

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi-mongodbatlas/sdk/v4/go/mongodbatlas/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// `ServiceAccountAccessListEntry` provides an Access List entry resource for Service Accounts. The resource lets you create, delete, and import an Access List entry for the specified Service Account.
//
// > **IMPORTANT:** When you remove an entry from the access list, existing connections from the removed address(es) may remain open for a variable amount of time. How much time passes before Atlas closes the connection depends on several factors, including how the connection was established, the particular behavior of the application or driver using the address, and the connection protocol (e.g., TCP or UDP). This is particularly important to consider when changing an existing IP address or CIDR block as they cannot be updated via the Provider, hence a change will force the destruction and recreation of entries.
//
// > **IMPORTANT WARNING:** Managing Service Accounts with Terraform **exposes sensitive organizational secrets** in Terraform's state. We suggest following Terraform's best practices.
//
// ## Example Usage
//
// ### S
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-mongodbatlas/sdk/v4/go/mongodbatlas"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			thisServiceAccount, err := mongodbatlas.NewServiceAccount(ctx, "this", &mongodbatlas.ServiceAccountArgs{
//				OrgId:       pulumi.Any(orgId),
//				Name:        pulumi.String("example-service-account"),
//				Description: pulumi.String("Example Service Account"),
//				Roles: pulumi.StringArray{
//					pulumi.String("ORG_READ_ONLY"),
//				},
//				SecretExpiresAfterHours: pulumi.Int(2160),
//			})
//			if err != nil {
//				return err
//			}
//			// Add IP Access List Entry to Service Account using CIDR Block
//			cidr, err := mongodbatlas.NewServiceAccountAccessListEntry(ctx, "cidr", &mongodbatlas.ServiceAccountAccessListEntryArgs{
//				OrgId:     pulumi.Any(orgId),
//				ClientId:  thisServiceAccount.ClientId,
//				CidrBlock: pulumi.String("1.2.3.4/32"),
//			})
//			if err != nil {
//				return err
//			}
//			// Add IP Access List Entry to Service Account using IP Address
//			_, err = mongodbatlas.NewServiceAccountAccessListEntry(ctx, "ip", &mongodbatlas.ServiceAccountAccessListEntryArgs{
//				OrgId:     pulumi.Any(orgId),
//				ClientId:  thisServiceAccount.ClientId,
//				IpAddress: pulumi.String("2.3.4.5"),
//			})
//			if err != nil {
//				return err
//			}
//			// Data source to read a single Access List entry for the Service Account
//			this := mongodbatlas.LookupServiceAccountAccessListEntryOutput(ctx, mongodbatlas.GetServiceAccountAccessListEntryOutputArgs{
//				OrgId:     cidr.OrgId,
//				ClientId:  cidr.ClientId,
//				CidrBlock: cidr.CidrBlock,
//			}, nil)
//			ctx.Export("accessListEntryCidrBlock", this.ApplyT(func(this mongodbatlas.GetServiceAccountAccessListEntryResult) (*string, error) {
//				return &this.CidrBlock, nil
//			}).(pulumi.StringPtrOutput))
//			// Data source to read all Access List entries for the Service Account
//			thisGetServiceAccountAccessListEntries := mongodbatlas.LookupServiceAccountAccessListEntriesOutput(ctx, mongodbatlas.GetServiceAccountAccessListEntriesOutputArgs{
//				OrgId:    thisServiceAccount.OrgId,
//				ClientId: thisServiceAccount.ClientId,
//			}, nil)
//			ctx.Export("allAccessListEntries", thisGetServiceAccountAccessListEntries.ApplyT(func(thisGetServiceAccountAccessListEntries mongodbatlas.GetServiceAccountAccessListEntriesResult) ([]mongodbatlas.GetServiceAccountAccessListEntriesResult, error) {
//				return []mongodbatlas.GetServiceAccountAccessListEntriesResult(thisGetServiceAccountAccessListEntries.Results), nil
//			}).([]mongodbatlas.GetServiceAccountAccessListEntriesResultOutput))
//			return nil
//		})
//	}
//
// ```
//
// ## Import
//
// Access List entries for Service Accounts can be imported using the `orgId`, `clientId` and `cidrBlock` or `ipAddress`, e.g.
//
// ```sh
// $ pulumi import mongodbatlas:index/serviceAccountAccessListEntry:ServiceAccountAccessListEntry test 5d0f1f74cf09a29120e123cd-mdb_sa_id_1234567890abcdef12345678-10.242.88.0/21
// ```
//
// For more information, see [Add Access List Entries for One Organization Service Account](https://www.mongodb.com/docs/api/doc/atlas-admin-api-v2/operation/operation-createorgserviceaccountaccesslist) in the MongoDB Atlas API documentation.
type ServiceAccountAccessListEntry struct {
	pulumi.CustomResourceState

	// Range of IP addresses in CIDR notation to be added to the access list. You can set a value for this parameter or **ip_address**, but not for both.
	CidrBlock pulumi.StringOutput `pulumi:"cidrBlock"`
	// The Client ID of the Service Account.
	ClientId pulumi.StringOutput `pulumi:"clientId"`
	// Date the entry was added to the access list. This attribute expresses its value in the ISO 8601 timestamp format in UTC.
	CreatedAt pulumi.StringOutput `pulumi:"createdAt"`
	// IP address to be added to the access list. You can set a value for this parameter or **cidr_block**, but not for both.
	IpAddress pulumi.StringOutput `pulumi:"ipAddress"`
	// Network address that issued the most recent request to the API.
	LastUsedAddress pulumi.StringOutput `pulumi:"lastUsedAddress"`
	// Date when the API received the most recent request that originated from this network address.
	LastUsedAt pulumi.StringOutput `pulumi:"lastUsedAt"`
	// Unique 24-hexadecimal digit string that identifies the organization that contains your projects.
	OrgId pulumi.StringOutput `pulumi:"orgId"`
	// The number of requests that has originated from this network address.
	RequestCount pulumi.IntOutput `pulumi:"requestCount"`
}

// NewServiceAccountAccessListEntry registers a new resource with the given unique name, arguments, and options.
func NewServiceAccountAccessListEntry(ctx *pulumi.Context,
	name string, args *ServiceAccountAccessListEntryArgs, opts ...pulumi.ResourceOption) (*ServiceAccountAccessListEntry, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.ClientId == nil {
		return nil, errors.New("invalid value for required argument 'ClientId'")
	}
	if args.OrgId == nil {
		return nil, errors.New("invalid value for required argument 'OrgId'")
	}
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource ServiceAccountAccessListEntry
	err := ctx.RegisterResource("mongodbatlas:index/serviceAccountAccessListEntry:ServiceAccountAccessListEntry", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetServiceAccountAccessListEntry gets an existing ServiceAccountAccessListEntry resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetServiceAccountAccessListEntry(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *ServiceAccountAccessListEntryState, opts ...pulumi.ResourceOption) (*ServiceAccountAccessListEntry, error) {
	var resource ServiceAccountAccessListEntry
	err := ctx.ReadResource("mongodbatlas:index/serviceAccountAccessListEntry:ServiceAccountAccessListEntry", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering ServiceAccountAccessListEntry resources.
type serviceAccountAccessListEntryState struct {
	// Range of IP addresses in CIDR notation to be added to the access list. You can set a value for this parameter or **ip_address**, but not for both.
	CidrBlock *string `pulumi:"cidrBlock"`
	// The Client ID of the Service Account.
	ClientId *string `pulumi:"clientId"`
	// Date the entry was added to the access list. This attribute expresses its value in the ISO 8601 timestamp format in UTC.
	CreatedAt *string `pulumi:"createdAt"`
	// IP address to be added to the access list. You can set a value for this parameter or **cidr_block**, but not for both.
	IpAddress *string `pulumi:"ipAddress"`
	// Network address that issued the most recent request to the API.
	LastUsedAddress *string `pulumi:"lastUsedAddress"`
	// Date when the API received the most recent request that originated from this network address.
	LastUsedAt *string `pulumi:"lastUsedAt"`
	// Unique 24-hexadecimal digit string that identifies the organization that contains your projects.
	OrgId *string `pulumi:"orgId"`
	// The number of requests that has originated from this network address.
	RequestCount *int `pulumi:"requestCount"`
}

type ServiceAccountAccessListEntryState struct {
	// Range of IP addresses in CIDR notation to be added to the access list. You can set a value for this parameter or **ip_address**, but not for both.
	CidrBlock pulumi.StringPtrInput
	// The Client ID of the Service Account.
	ClientId pulumi.StringPtrInput
	// Date the entry was added to the access list. This attribute expresses its value in the ISO 8601 timestamp format in UTC.
	CreatedAt pulumi.StringPtrInput
	// IP address to be added to the access list. You can set a value for this parameter or **cidr_block**, but not for both.
	IpAddress pulumi.StringPtrInput
	// Network address that issued the most recent request to the API.
	LastUsedAddress pulumi.StringPtrInput
	// Date when the API received the most recent request that originated from this network address.
	LastUsedAt pulumi.StringPtrInput
	// Unique 24-hexadecimal digit string that identifies the organization that contains your projects.
	OrgId pulumi.StringPtrInput
	// The number of requests that has originated from this network address.
	RequestCount pulumi.IntPtrInput
}

func (ServiceAccountAccessListEntryState) ElementType() reflect.Type {
	return reflect.TypeOf((*serviceAccountAccessListEntryState)(nil)).Elem()
}

type serviceAccountAccessListEntryArgs struct {
	// Range of IP addresses in CIDR notation to be added to the access list. You can set a value for this parameter or **ip_address**, but not for both.
	CidrBlock *string `pulumi:"cidrBlock"`
	// The Client ID of the Service Account.
	ClientId string `pulumi:"clientId"`
	// IP address to be added to the access list. You can set a value for this parameter or **cidr_block**, but not for both.
	IpAddress *string `pulumi:"ipAddress"`
	// Unique 24-hexadecimal digit string that identifies the organization that contains your projects.
	OrgId string `pulumi:"orgId"`
}

// The set of arguments for constructing a ServiceAccountAccessListEntry resource.
type ServiceAccountAccessListEntryArgs struct {
	// Range of IP addresses in CIDR notation to be added to the access list. You can set a value for this parameter or **ip_address**, but not for both.
	CidrBlock pulumi.StringPtrInput
	// The Client ID of the Service Account.
	ClientId pulumi.StringInput
	// IP address to be added to the access list. You can set a value for this parameter or **cidr_block**, but not for both.
	IpAddress pulumi.StringPtrInput
	// Unique 24-hexadecimal digit string that identifies the organization that contains your projects.
	OrgId pulumi.StringInput
}

func (ServiceAccountAccessListEntryArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*serviceAccountAccessListEntryArgs)(nil)).Elem()
}

type ServiceAccountAccessListEntryInput interface {
	pulumi.Input

	ToServiceAccountAccessListEntryOutput() ServiceAccountAccessListEntryOutput
	ToServiceAccountAccessListEntryOutputWithContext(ctx context.Context) ServiceAccountAccessListEntryOutput
}

func (*ServiceAccountAccessListEntry) ElementType() reflect.Type {
	return reflect.TypeOf((**ServiceAccountAccessListEntry)(nil)).Elem()
}

func (i *ServiceAccountAccessListEntry) ToServiceAccountAccessListEntryOutput() ServiceAccountAccessListEntryOutput {
	return i.ToServiceAccountAccessListEntryOutputWithContext(context.Background())
}

func (i *ServiceAccountAccessListEntry) ToServiceAccountAccessListEntryOutputWithContext(ctx context.Context) ServiceAccountAccessListEntryOutput {
	return pulumi.ToOutputWithContext(ctx, i).(ServiceAccountAccessListEntryOutput)
}

// ServiceAccountAccessListEntryArrayInput is an input type that accepts ServiceAccountAccessListEntryArray and ServiceAccountAccessListEntryArrayOutput values.
// You can construct a concrete instance of `ServiceAccountAccessListEntryArrayInput` via:
//
//	ServiceAccountAccessListEntryArray{ ServiceAccountAccessListEntryArgs{...} }
type ServiceAccountAccessListEntryArrayInput interface {
	pulumi.Input

	ToServiceAccountAccessListEntryArrayOutput() ServiceAccountAccessListEntryArrayOutput
	ToServiceAccountAccessListEntryArrayOutputWithContext(context.Context) ServiceAccountAccessListEntryArrayOutput
}

type ServiceAccountAccessListEntryArray []ServiceAccountAccessListEntryInput

func (ServiceAccountAccessListEntryArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*ServiceAccountAccessListEntry)(nil)).Elem()
}

func (i ServiceAccountAccessListEntryArray) ToServiceAccountAccessListEntryArrayOutput() ServiceAccountAccessListEntryArrayOutput {
	return i.ToServiceAccountAccessListEntryArrayOutputWithContext(context.Background())
}

func (i ServiceAccountAccessListEntryArray) ToServiceAccountAccessListEntryArrayOutputWithContext(ctx context.Context) ServiceAccountAccessListEntryArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(ServiceAccountAccessListEntryArrayOutput)
}

// ServiceAccountAccessListEntryMapInput is an input type that accepts ServiceAccountAccessListEntryMap and ServiceAccountAccessListEntryMapOutput values.
// You can construct a concrete instance of `ServiceAccountAccessListEntryMapInput` via:
//
//	ServiceAccountAccessListEntryMap{ "key": ServiceAccountAccessListEntryArgs{...} }
type ServiceAccountAccessListEntryMapInput interface {
	pulumi.Input

	ToServiceAccountAccessListEntryMapOutput() ServiceAccountAccessListEntryMapOutput
	ToServiceAccountAccessListEntryMapOutputWithContext(context.Context) ServiceAccountAccessListEntryMapOutput
}

type ServiceAccountAccessListEntryMap map[string]ServiceAccountAccessListEntryInput

func (ServiceAccountAccessListEntryMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*ServiceAccountAccessListEntry)(nil)).Elem()
}

func (i ServiceAccountAccessListEntryMap) ToServiceAccountAccessListEntryMapOutput() ServiceAccountAccessListEntryMapOutput {
	return i.ToServiceAccountAccessListEntryMapOutputWithContext(context.Background())
}

func (i ServiceAccountAccessListEntryMap) ToServiceAccountAccessListEntryMapOutputWithContext(ctx context.Context) ServiceAccountAccessListEntryMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(ServiceAccountAccessListEntryMapOutput)
}

type ServiceAccountAccessListEntryOutput struct{ *pulumi.OutputState }

func (ServiceAccountAccessListEntryOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**ServiceAccountAccessListEntry)(nil)).Elem()
}

func (o ServiceAccountAccessListEntryOutput) ToServiceAccountAccessListEntryOutput() ServiceAccountAccessListEntryOutput {
	return o
}

func (o ServiceAccountAccessListEntryOutput) ToServiceAccountAccessListEntryOutputWithContext(ctx context.Context) ServiceAccountAccessListEntryOutput {
	return o
}

// Range of IP addresses in CIDR notation to be added to the access list. You can set a value for this parameter or **ip_address**, but not for both.
func (o ServiceAccountAccessListEntryOutput) CidrBlock() pulumi.StringOutput {
	return o.ApplyT(func(v *ServiceAccountAccessListEntry) pulumi.StringOutput { return v.CidrBlock }).(pulumi.StringOutput)
}

// The Client ID of the Service Account.
func (o ServiceAccountAccessListEntryOutput) ClientId() pulumi.StringOutput {
	return o.ApplyT(func(v *ServiceAccountAccessListEntry) pulumi.StringOutput { return v.ClientId }).(pulumi.StringOutput)
}

// Date the entry was added to the access list. This attribute expresses its value in the ISO 8601 timestamp format in UTC.
func (o ServiceAccountAccessListEntryOutput) CreatedAt() pulumi.StringOutput {
	return o.ApplyT(func(v *ServiceAccountAccessListEntry) pulumi.StringOutput { return v.CreatedAt }).(pulumi.StringOutput)
}

// IP address to be added to the access list. You can set a value for this parameter or **cidr_block**, but not for both.
func (o ServiceAccountAccessListEntryOutput) IpAddress() pulumi.StringOutput {
	return o.ApplyT(func(v *ServiceAccountAccessListEntry) pulumi.StringOutput { return v.IpAddress }).(pulumi.StringOutput)
}

// Network address that issued the most recent request to the API.
func (o ServiceAccountAccessListEntryOutput) LastUsedAddress() pulumi.StringOutput {
	return o.ApplyT(func(v *ServiceAccountAccessListEntry) pulumi.StringOutput { return v.LastUsedAddress }).(pulumi.StringOutput)
}

// Date when the API received the most recent request that originated from this network address.
func (o ServiceAccountAccessListEntryOutput) LastUsedAt() pulumi.StringOutput {
	return o.ApplyT(func(v *ServiceAccountAccessListEntry) pulumi.StringOutput { return v.LastUsedAt }).(pulumi.StringOutput)
}

// Unique 24-hexadecimal digit string that identifies the organization that contains your projects.
func (o ServiceAccountAccessListEntryOutput) OrgId() pulumi.StringOutput {
	return o.ApplyT(func(v *ServiceAccountAccessListEntry) pulumi.StringOutput { return v.OrgId }).(pulumi.StringOutput)
}

// The number of requests that has originated from this network address.
func (o ServiceAccountAccessListEntryOutput) RequestCount() pulumi.IntOutput {
	return o.ApplyT(func(v *ServiceAccountAccessListEntry) pulumi.IntOutput { return v.RequestCount }).(pulumi.IntOutput)
}

type ServiceAccountAccessListEntryArrayOutput struct{ *pulumi.OutputState }

func (ServiceAccountAccessListEntryArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*ServiceAccountAccessListEntry)(nil)).Elem()
}

func (o ServiceAccountAccessListEntryArrayOutput) ToServiceAccountAccessListEntryArrayOutput() ServiceAccountAccessListEntryArrayOutput {
	return o
}

func (o ServiceAccountAccessListEntryArrayOutput) ToServiceAccountAccessListEntryArrayOutputWithContext(ctx context.Context) ServiceAccountAccessListEntryArrayOutput {
	return o
}

func (o ServiceAccountAccessListEntryArrayOutput) Index(i pulumi.IntInput) ServiceAccountAccessListEntryOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *ServiceAccountAccessListEntry {
		return vs[0].([]*ServiceAccountAccessListEntry)[vs[1].(int)]
	}).(ServiceAccountAccessListEntryOutput)
}

type ServiceAccountAccessListEntryMapOutput struct{ *pulumi.OutputState }

func (ServiceAccountAccessListEntryMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*ServiceAccountAccessListEntry)(nil)).Elem()
}

func (o ServiceAccountAccessListEntryMapOutput) ToServiceAccountAccessListEntryMapOutput() ServiceAccountAccessListEntryMapOutput {
	return o
}

func (o ServiceAccountAccessListEntryMapOutput) ToServiceAccountAccessListEntryMapOutputWithContext(ctx context.Context) ServiceAccountAccessListEntryMapOutput {
	return o
}

func (o ServiceAccountAccessListEntryMapOutput) MapIndex(k pulumi.StringInput) ServiceAccountAccessListEntryOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *ServiceAccountAccessListEntry {
		return vs[0].(map[string]*ServiceAccountAccessListEntry)[vs[1].(string)]
	}).(ServiceAccountAccessListEntryOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*ServiceAccountAccessListEntryInput)(nil)).Elem(), &ServiceAccountAccessListEntry{})
	pulumi.RegisterInputType(reflect.TypeOf((*ServiceAccountAccessListEntryArrayInput)(nil)).Elem(), ServiceAccountAccessListEntryArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*ServiceAccountAccessListEntryMapInput)(nil)).Elem(), ServiceAccountAccessListEntryMap{})
	pulumi.RegisterOutputType(ServiceAccountAccessListEntryOutput{})
	pulumi.RegisterOutputType(ServiceAccountAccessListEntryArrayOutput{})
	pulumi.RegisterOutputType(ServiceAccountAccessListEntryMapOutput{})
}
