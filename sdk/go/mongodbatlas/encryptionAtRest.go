// *** WARNING: this file was generated by the Pulumi Terraform Bridge (tfgen) Tool. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

package mongodbatlas

import (
	"context"
	"reflect"

	"github.com/pkg/errors"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// `EncryptionAtRest` Allows management of encryption at rest for an Atlas project with one of the following providers:
//
// [Amazon Web Services Key Management Service](https://docs.atlas.mongodb.com/security-aws-kms/#security-aws-kms)
// [Azure Key Vault](https://docs.atlas.mongodb.com/security-azure-kms/#security-azure-kms)
// [Google Cloud KMS](https://docs.atlas.mongodb.com/security-gcp-kms/#security-gcp-kms)
//
// After configuring at least one Encryption at Rest provider for the Atlas project, Project Owners can enable Encryption at Rest for each Atlas cluster for which they require encryption. The Encryption at Rest provider does not have to match the cluster cloud service provider.
//
// Atlas does not automatically rotate user-managed encryption keys. Defer to your preferred Encryption at Rest providerâ€™s documentation and guidance for best practices on key rotation. Atlas automatically creates a 365-day key rotation alert when you configure Encryption at Rest using your Key Management in an Atlas project.
//
// See [Encryption at Rest](https://docs.atlas.mongodb.com/security-kms-encryption/index.html) for more information, including prerequisites and restrictions.
//
// > **IMPORTANT** Atlas encrypts all cluster storage and snapshot volumes, securing all cluster data on disk: a concept known as encryption at rest, by default.
//
// > **NOTE:** Groups and projects are synonymous terms. You may find `groupId` in the official documentation.
//
// ## Example Usage
//
// ```go
// package main
//
// import (
// 	"fmt"
//
// 	"github.com/pulumi/pulumi-mongodbatlas/sdk/v2/go/mongodbatlas"
// 	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
// )
//
// func main() {
// 	pulumi.Run(func(ctx *pulumi.Context) error {
// 		_, err := mongodbatlas.NewEncryptionAtRest(ctx, "test", &mongodbatlas.EncryptionAtRestArgs{
// 			AwsKms: &mongodbatlas.EncryptionAtRestAwsKmsArgs{
// 				Customer_master_key_id: pulumi.String("5ce83906-6563-46b7-8045-11c20e3a5766"),
// 				Enabled:                pulumi.Bool(true),
// 				Region:                 pulumi.String("US_EAST_1"),
// 				Role_id:                pulumi.String("60815e2fe01a49138a928ebb"),
// 			},
// 			AzureKeyVault: &mongodbatlas.EncryptionAtRestAzureKeyVaultArgs{
// 				Azure_environment:   pulumi.String("AZURE"),
// 				Client_id:           pulumi.String("g54f9e2-89e3-40fd-8188-EXAMPLEID"),
// 				Enabled:             pulumi.Bool(true),
// 				Key_identifier:      pulumi.String("https://EXAMPLEKeyVault.vault.azure.net/keys/EXAMPLEKey/d891821e3d364e9eb88fbd3d11807b86"),
// 				Key_vault_name:      pulumi.String("EXAMPLEKeyVault"),
// 				Resource_group_name: pulumi.String("ExampleRGName"),
// 				Secret:              pulumi.String("EXAMPLESECRET"),
// 				Subscription_id:     pulumi.String("0ec944e3-g725-44f9-a147-EXAMPLEID"),
// 				Tenant_id:           pulumi.String("e8e4b6ba-ff32-4c88-a9af-EXAMPLEID"),
// 			},
// 			GoogleCloudKms: &mongodbatlas.EncryptionAtRestGoogleCloudKmsArgs{
// 				Enabled:                 pulumi.Bool(true),
// 				Key_version_resource_id: pulumi.String("projects/my-project-common-0/locations/us-east4/keyRings/my-key-ring-0/cryptoKeys/my-key-0/cryptoKeyVersions/1"),
// 				Service_account_key:     pulumi.String(fmt.Sprintf("%v%v%v", "{\"type\": \"service_account\",\"project_id\": \"my-project-common-0\",\"private_key_id\": \"e120598ea4f88249469fcdd75a9a785c1bb3\",\"private_key\": \"-----BEGIN PRIVATE KEY-----\\nMIIEuwIBA(truncated)SfecnS0mT94D9\\n-----END PRIVATE KEY-----\\n\",\"client_email\": \"my-email-kms-0@my-project-common-0.iam.gserviceaccount.com\",\"client_id\": \"10180967717292066\",\"auth_uri\": \"https://accounts.google.com/o/oauth2/auth\",\"token_uri\": \"https://accounts.google.com/o/oauth2/token\",\"auth_provider_x509_cert_url\": \"https://www.googleapis.com/oauth2/v1/certs\",\"client_x509_cert_url\": \"https://www.googleapis.com/robot/v1/metadata/x509/my-email-kms-0", "%", "40my-project-common-0.iam.gserviceaccount.com\"}")),
// 			},
// 			ProjectId: pulumi.String("<PROJECT-ID>"),
// 		})
// 		if err != nil {
// 			return err
// 		}
// 		return nil
// 	})
// }
// ```
type EncryptionAtRest struct {
	pulumi.CustomResourceState

	// Specifies AWS KMS configuration details and whether Encryption at Rest is enabled for an Atlas project.
	AwsKms EncryptionAtRestAwsKmsPtrOutput `pulumi:"awsKms"`
	// Specifies Azure Key Vault configuration details and whether Encryption at Rest is enabled for an Atlas project.
	AzureKeyVault EncryptionAtRestAzureKeyVaultPtrOutput `pulumi:"azureKeyVault"`
	// Specifies GCP KMS configuration details and whether Encryption at Rest is enabled for an Atlas project.
	GoogleCloudKms EncryptionAtRestGoogleCloudKmsPtrOutput `pulumi:"googleCloudKms"`
	// The unique identifier for the project.
	ProjectId pulumi.StringOutput `pulumi:"projectId"`
}

// NewEncryptionAtRest registers a new resource with the given unique name, arguments, and options.
func NewEncryptionAtRest(ctx *pulumi.Context,
	name string, args *EncryptionAtRestArgs, opts ...pulumi.ResourceOption) (*EncryptionAtRest, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.ProjectId == nil {
		return nil, errors.New("invalid value for required argument 'ProjectId'")
	}
	var resource EncryptionAtRest
	err := ctx.RegisterResource("mongodbatlas:index/encryptionAtRest:EncryptionAtRest", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetEncryptionAtRest gets an existing EncryptionAtRest resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetEncryptionAtRest(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *EncryptionAtRestState, opts ...pulumi.ResourceOption) (*EncryptionAtRest, error) {
	var resource EncryptionAtRest
	err := ctx.ReadResource("mongodbatlas:index/encryptionAtRest:EncryptionAtRest", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering EncryptionAtRest resources.
type encryptionAtRestState struct {
	// Specifies AWS KMS configuration details and whether Encryption at Rest is enabled for an Atlas project.
	AwsKms *EncryptionAtRestAwsKms `pulumi:"awsKms"`
	// Specifies Azure Key Vault configuration details and whether Encryption at Rest is enabled for an Atlas project.
	AzureKeyVault *EncryptionAtRestAzureKeyVault `pulumi:"azureKeyVault"`
	// Specifies GCP KMS configuration details and whether Encryption at Rest is enabled for an Atlas project.
	GoogleCloudKms *EncryptionAtRestGoogleCloudKms `pulumi:"googleCloudKms"`
	// The unique identifier for the project.
	ProjectId *string `pulumi:"projectId"`
}

type EncryptionAtRestState struct {
	// Specifies AWS KMS configuration details and whether Encryption at Rest is enabled for an Atlas project.
	AwsKms EncryptionAtRestAwsKmsPtrInput
	// Specifies Azure Key Vault configuration details and whether Encryption at Rest is enabled for an Atlas project.
	AzureKeyVault EncryptionAtRestAzureKeyVaultPtrInput
	// Specifies GCP KMS configuration details and whether Encryption at Rest is enabled for an Atlas project.
	GoogleCloudKms EncryptionAtRestGoogleCloudKmsPtrInput
	// The unique identifier for the project.
	ProjectId pulumi.StringPtrInput
}

func (EncryptionAtRestState) ElementType() reflect.Type {
	return reflect.TypeOf((*encryptionAtRestState)(nil)).Elem()
}

type encryptionAtRestArgs struct {
	// Specifies AWS KMS configuration details and whether Encryption at Rest is enabled for an Atlas project.
	AwsKms *EncryptionAtRestAwsKms `pulumi:"awsKms"`
	// Specifies Azure Key Vault configuration details and whether Encryption at Rest is enabled for an Atlas project.
	AzureKeyVault *EncryptionAtRestAzureKeyVault `pulumi:"azureKeyVault"`
	// Specifies GCP KMS configuration details and whether Encryption at Rest is enabled for an Atlas project.
	GoogleCloudKms *EncryptionAtRestGoogleCloudKms `pulumi:"googleCloudKms"`
	// The unique identifier for the project.
	ProjectId string `pulumi:"projectId"`
}

// The set of arguments for constructing a EncryptionAtRest resource.
type EncryptionAtRestArgs struct {
	// Specifies AWS KMS configuration details and whether Encryption at Rest is enabled for an Atlas project.
	AwsKms EncryptionAtRestAwsKmsPtrInput
	// Specifies Azure Key Vault configuration details and whether Encryption at Rest is enabled for an Atlas project.
	AzureKeyVault EncryptionAtRestAzureKeyVaultPtrInput
	// Specifies GCP KMS configuration details and whether Encryption at Rest is enabled for an Atlas project.
	GoogleCloudKms EncryptionAtRestGoogleCloudKmsPtrInput
	// The unique identifier for the project.
	ProjectId pulumi.StringInput
}

func (EncryptionAtRestArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*encryptionAtRestArgs)(nil)).Elem()
}

type EncryptionAtRestInput interface {
	pulumi.Input

	ToEncryptionAtRestOutput() EncryptionAtRestOutput
	ToEncryptionAtRestOutputWithContext(ctx context.Context) EncryptionAtRestOutput
}

func (*EncryptionAtRest) ElementType() reflect.Type {
	return reflect.TypeOf((*EncryptionAtRest)(nil))
}

func (i *EncryptionAtRest) ToEncryptionAtRestOutput() EncryptionAtRestOutput {
	return i.ToEncryptionAtRestOutputWithContext(context.Background())
}

func (i *EncryptionAtRest) ToEncryptionAtRestOutputWithContext(ctx context.Context) EncryptionAtRestOutput {
	return pulumi.ToOutputWithContext(ctx, i).(EncryptionAtRestOutput)
}

func (i *EncryptionAtRest) ToEncryptionAtRestPtrOutput() EncryptionAtRestPtrOutput {
	return i.ToEncryptionAtRestPtrOutputWithContext(context.Background())
}

func (i *EncryptionAtRest) ToEncryptionAtRestPtrOutputWithContext(ctx context.Context) EncryptionAtRestPtrOutput {
	return pulumi.ToOutputWithContext(ctx, i).(EncryptionAtRestPtrOutput)
}

type EncryptionAtRestPtrInput interface {
	pulumi.Input

	ToEncryptionAtRestPtrOutput() EncryptionAtRestPtrOutput
	ToEncryptionAtRestPtrOutputWithContext(ctx context.Context) EncryptionAtRestPtrOutput
}

type encryptionAtRestPtrType EncryptionAtRestArgs

func (*encryptionAtRestPtrType) ElementType() reflect.Type {
	return reflect.TypeOf((**EncryptionAtRest)(nil))
}

func (i *encryptionAtRestPtrType) ToEncryptionAtRestPtrOutput() EncryptionAtRestPtrOutput {
	return i.ToEncryptionAtRestPtrOutputWithContext(context.Background())
}

func (i *encryptionAtRestPtrType) ToEncryptionAtRestPtrOutputWithContext(ctx context.Context) EncryptionAtRestPtrOutput {
	return pulumi.ToOutputWithContext(ctx, i).(EncryptionAtRestPtrOutput)
}

// EncryptionAtRestArrayInput is an input type that accepts EncryptionAtRestArray and EncryptionAtRestArrayOutput values.
// You can construct a concrete instance of `EncryptionAtRestArrayInput` via:
//
//          EncryptionAtRestArray{ EncryptionAtRestArgs{...} }
type EncryptionAtRestArrayInput interface {
	pulumi.Input

	ToEncryptionAtRestArrayOutput() EncryptionAtRestArrayOutput
	ToEncryptionAtRestArrayOutputWithContext(context.Context) EncryptionAtRestArrayOutput
}

type EncryptionAtRestArray []EncryptionAtRestInput

func (EncryptionAtRestArray) ElementType() reflect.Type {
	return reflect.TypeOf(([]*EncryptionAtRest)(nil))
}

func (i EncryptionAtRestArray) ToEncryptionAtRestArrayOutput() EncryptionAtRestArrayOutput {
	return i.ToEncryptionAtRestArrayOutputWithContext(context.Background())
}

func (i EncryptionAtRestArray) ToEncryptionAtRestArrayOutputWithContext(ctx context.Context) EncryptionAtRestArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(EncryptionAtRestArrayOutput)
}

// EncryptionAtRestMapInput is an input type that accepts EncryptionAtRestMap and EncryptionAtRestMapOutput values.
// You can construct a concrete instance of `EncryptionAtRestMapInput` via:
//
//          EncryptionAtRestMap{ "key": EncryptionAtRestArgs{...} }
type EncryptionAtRestMapInput interface {
	pulumi.Input

	ToEncryptionAtRestMapOutput() EncryptionAtRestMapOutput
	ToEncryptionAtRestMapOutputWithContext(context.Context) EncryptionAtRestMapOutput
}

type EncryptionAtRestMap map[string]EncryptionAtRestInput

func (EncryptionAtRestMap) ElementType() reflect.Type {
	return reflect.TypeOf((map[string]*EncryptionAtRest)(nil))
}

func (i EncryptionAtRestMap) ToEncryptionAtRestMapOutput() EncryptionAtRestMapOutput {
	return i.ToEncryptionAtRestMapOutputWithContext(context.Background())
}

func (i EncryptionAtRestMap) ToEncryptionAtRestMapOutputWithContext(ctx context.Context) EncryptionAtRestMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(EncryptionAtRestMapOutput)
}

type EncryptionAtRestOutput struct {
	*pulumi.OutputState
}

func (EncryptionAtRestOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*EncryptionAtRest)(nil))
}

func (o EncryptionAtRestOutput) ToEncryptionAtRestOutput() EncryptionAtRestOutput {
	return o
}

func (o EncryptionAtRestOutput) ToEncryptionAtRestOutputWithContext(ctx context.Context) EncryptionAtRestOutput {
	return o
}

func (o EncryptionAtRestOutput) ToEncryptionAtRestPtrOutput() EncryptionAtRestPtrOutput {
	return o.ToEncryptionAtRestPtrOutputWithContext(context.Background())
}

func (o EncryptionAtRestOutput) ToEncryptionAtRestPtrOutputWithContext(ctx context.Context) EncryptionAtRestPtrOutput {
	return o.ApplyT(func(v EncryptionAtRest) *EncryptionAtRest {
		return &v
	}).(EncryptionAtRestPtrOutput)
}

type EncryptionAtRestPtrOutput struct {
	*pulumi.OutputState
}

func (EncryptionAtRestPtrOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**EncryptionAtRest)(nil))
}

func (o EncryptionAtRestPtrOutput) ToEncryptionAtRestPtrOutput() EncryptionAtRestPtrOutput {
	return o
}

func (o EncryptionAtRestPtrOutput) ToEncryptionAtRestPtrOutputWithContext(ctx context.Context) EncryptionAtRestPtrOutput {
	return o
}

type EncryptionAtRestArrayOutput struct{ *pulumi.OutputState }

func (EncryptionAtRestArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]EncryptionAtRest)(nil))
}

func (o EncryptionAtRestArrayOutput) ToEncryptionAtRestArrayOutput() EncryptionAtRestArrayOutput {
	return o
}

func (o EncryptionAtRestArrayOutput) ToEncryptionAtRestArrayOutputWithContext(ctx context.Context) EncryptionAtRestArrayOutput {
	return o
}

func (o EncryptionAtRestArrayOutput) Index(i pulumi.IntInput) EncryptionAtRestOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) EncryptionAtRest {
		return vs[0].([]EncryptionAtRest)[vs[1].(int)]
	}).(EncryptionAtRestOutput)
}

type EncryptionAtRestMapOutput struct{ *pulumi.OutputState }

func (EncryptionAtRestMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]EncryptionAtRest)(nil))
}

func (o EncryptionAtRestMapOutput) ToEncryptionAtRestMapOutput() EncryptionAtRestMapOutput {
	return o
}

func (o EncryptionAtRestMapOutput) ToEncryptionAtRestMapOutputWithContext(ctx context.Context) EncryptionAtRestMapOutput {
	return o
}

func (o EncryptionAtRestMapOutput) MapIndex(k pulumi.StringInput) EncryptionAtRestOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) EncryptionAtRest {
		return vs[0].(map[string]EncryptionAtRest)[vs[1].(string)]
	}).(EncryptionAtRestOutput)
}

func init() {
	pulumi.RegisterOutputType(EncryptionAtRestOutput{})
	pulumi.RegisterOutputType(EncryptionAtRestPtrOutput{})
	pulumi.RegisterOutputType(EncryptionAtRestArrayOutput{})
	pulumi.RegisterOutputType(EncryptionAtRestMapOutput{})
}
