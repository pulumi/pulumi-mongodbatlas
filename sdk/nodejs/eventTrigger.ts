// *** WARNING: this file was generated by pulumi-language-nodejs. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

import * as pulumi from "@pulumi/pulumi";
import * as inputs from "./types/input";
import * as outputs from "./types/output";
import * as utilities from "./utilities";

/**
 * `mongodbatlas.EventTrigger` provides a Event Trigger resource.
 *
 * Note: If the `appId` changes in the mongodbatlas.EventTrigger resource, it will force a replacement and delete itself from the old Atlas App Services app. If it still exists, then it creates itself in the new  Atlas App Services app. See [Atlas Triggers](https://www.mongodb.com/docs/atlas/atlas-ui/triggers/aws-eventbridge/) to learn more.
 *
 * ## Example Usage
 *
 * ### S
 *
 * ### Example Usage: Database Trigger with Function
 * ```typescript
 * import * as pulumi from "@pulumi/pulumi";
 * import * as mongodbatlas from "@pulumi/mongodbatlas";
 *
 * const test = new mongodbatlas.EventTrigger("test", {
 *     projectId: "PROJECT ID",
 *     appId: "APPLICATION ID",
 *     name: "NAME OF THE TRIGGER",
 *     type: "DATABASE",
 *     functionId: "FUNCTION ID",
 *     disabled: false,
 *     configOperationTypes: [
 *         "INSERT",
 *         "UPDATE",
 *     ],
 *     configDatabase: "DATABASE NAME",
 *     configCollection: "COLLECTION NAME",
 *     configServiceId: "SERVICE ID",
 *     configMatch: `{
 *   \\"updateDescription.updatedFields\\": {
 *     \\"status\\": \\"blocked\\"
 *   }
 * }
 * `,
 *     configProject: "{\"updateDescription.updatedFields\":{\"status\":\"blocked\"}}",
 *     configFullDocument: false,
 *     configFullDocumentBefore: false,
 *     eventProcessors: {
 *         awsEventbridge: {
 *             configAccountId: "AWS ACCOUNT ID",
 *             configRegion: "AWS REGIOn",
 *         },
 *     },
 * });
 * ```
 *
 * Note: Terraform allows creating [database triggers,](https://www.mongodb.com/docs/atlas/app-services/triggers/database-triggers/#:~:text=Database%20triggers%20use%20MongoDB%20change,trigger%20created%20in%20a%20collection.) but not Atlas Functions. See [Define a Function](https://www.mongodb.com/docs/atlas/atlas-ui/triggers/functions/#define-a-function) in the Atlas documentation for more details on creating functions in Atlas.
 *
 * ### Example Usage: Database Trigger with EventBridge
 * ```typescript
 * import * as pulumi from "@pulumi/pulumi";
 * import * as mongodbatlas from "@pulumi/mongodbatlas";
 *
 * const test = new mongodbatlas.EventTrigger("test", {
 *     projectId: "PROJECT ID",
 *     appId: "APPLICATION ID",
 *     name: "NAME OF THE TRIGGER",
 *     type: "DATABASE",
 *     disabled: false,
 *     unordered: false,
 *     configOperationTypes: [
 *         "INSERT",
 *         "UPDATE",
 *     ],
 *     configOperationType: "LOGIN",
 *     configProviders: ["anon-user"],
 *     configDatabase: "DATABASE NAME",
 *     configCollection: "COLLECTION NAME",
 *     configServiceId: "1",
 *     configMatch: "{\"updateDescription.updatedFields\":{\"status\":\"blocked\"}}",
 *     configProject: "{\"updateDescription.updatedFields\":{\"status\":\"blocked\"}}",
 *     configFullDocument: false,
 *     configFullDocumentBefore: false,
 *     configSchedule: "*",
 *     eventProcessors: {
 *         awsEventbridge: {
 *             configAccountId: "AWS ACCOUNT ID",
 *             configRegion: "AWS REGIOn",
 *         },
 *     },
 * });
 * ```
 *
 * ### Example Usage: Authentication Trigger
 * ```typescript
 * import * as pulumi from "@pulumi/pulumi";
 * import * as mongodbatlas from "@pulumi/mongodbatlas";
 *
 * const test = new mongodbatlas.EventTrigger("test", {
 *     projectId: "PROJECT ID",
 *     appId: "APPLICATION ID",
 *     name: "NAME OF THE TRIGGER",
 *     type: "AUTHENTICATION",
 *     functionId: "1",
 *     disabled: false,
 *     configOperationType: "LOGIN",
 *     configProviders: ["anon-user"],
 * });
 * ```
 *
 * ### Example Usage: Scheduled Trigger
 * ```typescript
 * import * as pulumi from "@pulumi/pulumi";
 * import * as mongodbatlas from "@pulumi/mongodbatlas";
 *
 * const test = new mongodbatlas.EventTrigger("test", {
 *     projectId: "PROJECT ID",
 *     appId: "APPLICATION ID",
 *     name: "NAME OF THE TRIGGER",
 *     type: "SCHEDULED",
 *     functionId: "1",
 *     disabled: false,
 *     configSchedule: "*",
 * });
 * ```
 *
 * ## Import
 *
 * Event trigger can be imported using project ID, App ID and Trigger ID, in the format `projectId`--`appId`-`triggerId`, e.g.
 *
 * ```sh
 * $ pulumi import mongodbatlas:index/eventTrigger:EventTrigger test 1112222b3bf99403840e8934--testing-example--1112222b3bf99403840e8934
 * ```
 * For more details on this resource see [Triggers resource](https://www.mongodb.com/docs/atlas/app-services/admin/api/v3/#tag/triggers) in Atlas App Services Documentation.
 */
export class EventTrigger extends pulumi.CustomResource {
    /**
     * Get an existing EventTrigger resource's state with the given name, ID, and optional extra
     * properties used to qualify the lookup.
     *
     * @param name The _unique_ name of the resulting resource.
     * @param id The _unique_ provider ID of the resource to lookup.
     * @param state Any extra arguments used during the lookup.
     * @param opts Optional settings to control the behavior of the CustomResource.
     */
    public static get(name: string, id: pulumi.Input<pulumi.ID>, state?: EventTriggerState, opts?: pulumi.CustomResourceOptions): EventTrigger {
        return new EventTrigger(name, <any>state, { ...opts, id: id });
    }

    /** @internal */
    public static readonly __pulumiType = 'mongodbatlas:index/eventTrigger:EventTrigger';

    /**
     * Returns true if the given object is an instance of EventTrigger.  This is designed to work even
     * when multiple copies of the Pulumi SDK have been loaded into the same process.
     */
    public static isInstance(obj: any): obj is EventTrigger {
        if (obj === undefined || obj === null) {
            return false;
        }
        return obj['__pulumiType'] === EventTrigger.__pulumiType;
    }

    /**
     * The ObjectID of your application.
     * * For more details on `projectId` and `appId` see: https://www.mongodb.com/docs/api/doc/atlas-app-services-admin-api-v3/#topic-project-amp-application-ids
     */
    declare public readonly appId: pulumi.Output<string>;
    /**
     * Optional for `DATABASE` type. The name of the MongoDB collection that the trigger watches for change events. The collection must be part of the specified database.
     */
    declare public readonly configCollection: pulumi.Output<string>;
    /**
     * Required for `DATABASE` type. The name of the MongoDB database to watch.
     */
    declare public readonly configDatabase: pulumi.Output<string>;
    /**
     * Optional for `DATABASE` type. If true, indicates that `UPDATE` change events should include the most current [majority-committed](https://docs.mongodb.com/manual/reference/read-concern-majority/) version of the modified document in the fullDocument field.
     */
    declare public readonly configFullDocument: pulumi.Output<boolean>;
    declare public readonly configFullDocumentBefore: pulumi.Output<boolean>;
    /**
     * Optional for `DATABASE` type. A [$match](https://docs.mongodb.com/manual/reference/operator/aggregation/match/) expression document that MongoDB Realm includes in the underlying change stream pipeline for the trigger. This is useful when you want to filter change events beyond their operation type. The trigger will only fire if the expression evaluates to true for a given change event.
     */
    declare public readonly configMatch: pulumi.Output<string>;
    /**
     * Required for `AUTHENTICATION` type. The [authentication operation type](https://www.mongodb.com/docs/atlas/atlas-ui/triggers/authentication-triggers/#authentication-events) to listen for. Possible Values: `LOGIN`, `CREATE`, `DELETE`
     */
    declare public readonly configOperationType: pulumi.Output<string>;
    /**
     * Required for `DATABASE` type. The [database event operation types](https://www.mongodb.com/docs/atlas/atlas-ui/triggers/database-triggers/#std-label-atlas-database-event-operation-types) to listen for. This must contain at least one value. Possible Values: `INSERT`, `UPDATE`, `REPLACE`, `DELETE`
     */
    declare public readonly configOperationTypes: pulumi.Output<string[]>;
    /**
     * Optional for `DATABASE` type. A [$project](https://docs.mongodb.com/manual/reference/operator/aggregation/project/) expression document that Realm uses to filter the fields that appear in change event objects.
     */
    declare public readonly configProject: pulumi.Output<string>;
    /**
     * Required for `AUTHENTICATION` type. A list of one or more [authentication provider](https://www.mongodb.com/docs/atlas/app-services/authentication/#authentication-providers-1) id values. The trigger will only listen for authentication events produced by these providers.
     */
    declare public readonly configProviders: pulumi.Output<string[]>;
    /**
     * Required for `SCHEDULED` type. A [cron expression](https://www.mongodb.com/docs/atlas/atlas-ui/triggers/scheduled-triggers/#cron-expressions) that defines the trigger schedule.
     */
    declare public readonly configSchedule: pulumi.Output<string>;
    declare public /*out*/ readonly configScheduleType: pulumi.Output<string>;
    /**
     * Required for `DATABASE` type. The ID of the MongoDB Service associated with the trigger.
     */
    declare public readonly configServiceId: pulumi.Output<string>;
    /**
     * Default: `false` If `true`, the trigger is disabled.
     */
    declare public readonly disabled: pulumi.Output<boolean>;
    /**
     * An object where each field name is an event processor ID and each value is an object that configures its corresponding event processor. The following event processors are supported: `AWS_EVENTBRIDGE` For an example configuration object, see [Send Trigger Events to AWS EventBridge](https://www.mongodb.com/docs/atlas/atlas-ui/triggers/aws-eventbridge/#send-trigger-events-to-aws-eventbridge).
     * * `event_processors.0.aws_eventbridge.config_account_id` - (Optional) AWS Account ID.
     * * `event_processors.0.aws_eventbridge.config_region` - (Optional) Region of AWS Account.
     */
    declare public readonly eventProcessors: pulumi.Output<outputs.EventTriggerEventProcessors | undefined>;
    /**
     * The ID of the function associated with the trigger.
     */
    declare public readonly functionId: pulumi.Output<string | undefined>;
    /**
     * The name of the function associated with the trigger.
     */
    declare public /*out*/ readonly functionName: pulumi.Output<string>;
    /**
     * The name of the trigger.
     */
    declare public readonly name: pulumi.Output<string>;
    /**
     * The unique ID for the project to create the trigger.
     */
    declare public readonly projectId: pulumi.Output<string>;
    /**
     * The unique ID of the trigger.
     */
    declare public /*out*/ readonly triggerId: pulumi.Output<string>;
    /**
     * The type of the trigger. Possible Values: `DATABASE`, `AUTHENTICATION`,`SCHEDULED`
     */
    declare public readonly type: pulumi.Output<string>;
    /**
     * Only Available for Database Triggers. If true, event ordering is disabled and this trigger can process events in parallel. If false, event ordering is enabled and the trigger executes serially.
     */
    declare public readonly unordered: pulumi.Output<boolean>;

    /**
     * Create a EventTrigger resource with the given unique name, arguments, and options.
     *
     * @param name The _unique_ name of the resource.
     * @param args The arguments to use to populate this resource's properties.
     * @param opts A bag of options that control this resource's behavior.
     */
    constructor(name: string, args: EventTriggerArgs, opts?: pulumi.CustomResourceOptions)
    constructor(name: string, argsOrState?: EventTriggerArgs | EventTriggerState, opts?: pulumi.CustomResourceOptions) {
        let resourceInputs: pulumi.Inputs = {};
        opts = opts || {};
        if (opts.id) {
            const state = argsOrState as EventTriggerState | undefined;
            resourceInputs["appId"] = state?.appId;
            resourceInputs["configCollection"] = state?.configCollection;
            resourceInputs["configDatabase"] = state?.configDatabase;
            resourceInputs["configFullDocument"] = state?.configFullDocument;
            resourceInputs["configFullDocumentBefore"] = state?.configFullDocumentBefore;
            resourceInputs["configMatch"] = state?.configMatch;
            resourceInputs["configOperationType"] = state?.configOperationType;
            resourceInputs["configOperationTypes"] = state?.configOperationTypes;
            resourceInputs["configProject"] = state?.configProject;
            resourceInputs["configProviders"] = state?.configProviders;
            resourceInputs["configSchedule"] = state?.configSchedule;
            resourceInputs["configScheduleType"] = state?.configScheduleType;
            resourceInputs["configServiceId"] = state?.configServiceId;
            resourceInputs["disabled"] = state?.disabled;
            resourceInputs["eventProcessors"] = state?.eventProcessors;
            resourceInputs["functionId"] = state?.functionId;
            resourceInputs["functionName"] = state?.functionName;
            resourceInputs["name"] = state?.name;
            resourceInputs["projectId"] = state?.projectId;
            resourceInputs["triggerId"] = state?.triggerId;
            resourceInputs["type"] = state?.type;
            resourceInputs["unordered"] = state?.unordered;
        } else {
            const args = argsOrState as EventTriggerArgs | undefined;
            if (args?.appId === undefined && !opts.urn) {
                throw new Error("Missing required property 'appId'");
            }
            if (args?.projectId === undefined && !opts.urn) {
                throw new Error("Missing required property 'projectId'");
            }
            if (args?.type === undefined && !opts.urn) {
                throw new Error("Missing required property 'type'");
            }
            resourceInputs["appId"] = args?.appId;
            resourceInputs["configCollection"] = args?.configCollection;
            resourceInputs["configDatabase"] = args?.configDatabase;
            resourceInputs["configFullDocument"] = args?.configFullDocument;
            resourceInputs["configFullDocumentBefore"] = args?.configFullDocumentBefore;
            resourceInputs["configMatch"] = args?.configMatch;
            resourceInputs["configOperationType"] = args?.configOperationType;
            resourceInputs["configOperationTypes"] = args?.configOperationTypes;
            resourceInputs["configProject"] = args?.configProject;
            resourceInputs["configProviders"] = args?.configProviders;
            resourceInputs["configSchedule"] = args?.configSchedule;
            resourceInputs["configServiceId"] = args?.configServiceId;
            resourceInputs["disabled"] = args?.disabled;
            resourceInputs["eventProcessors"] = args?.eventProcessors;
            resourceInputs["functionId"] = args?.functionId;
            resourceInputs["name"] = args?.name;
            resourceInputs["projectId"] = args?.projectId;
            resourceInputs["type"] = args?.type;
            resourceInputs["unordered"] = args?.unordered;
            resourceInputs["configScheduleType"] = undefined /*out*/;
            resourceInputs["functionName"] = undefined /*out*/;
            resourceInputs["triggerId"] = undefined /*out*/;
        }
        opts = pulumi.mergeOptions(utilities.resourceOptsDefaults(), opts);
        super(EventTrigger.__pulumiType, name, resourceInputs, opts);
    }
}

/**
 * Input properties used for looking up and filtering EventTrigger resources.
 */
export interface EventTriggerState {
    /**
     * The ObjectID of your application.
     * * For more details on `projectId` and `appId` see: https://www.mongodb.com/docs/api/doc/atlas-app-services-admin-api-v3/#topic-project-amp-application-ids
     */
    appId?: pulumi.Input<string>;
    /**
     * Optional for `DATABASE` type. The name of the MongoDB collection that the trigger watches for change events. The collection must be part of the specified database.
     */
    configCollection?: pulumi.Input<string>;
    /**
     * Required for `DATABASE` type. The name of the MongoDB database to watch.
     */
    configDatabase?: pulumi.Input<string>;
    /**
     * Optional for `DATABASE` type. If true, indicates that `UPDATE` change events should include the most current [majority-committed](https://docs.mongodb.com/manual/reference/read-concern-majority/) version of the modified document in the fullDocument field.
     */
    configFullDocument?: pulumi.Input<boolean>;
    configFullDocumentBefore?: pulumi.Input<boolean>;
    /**
     * Optional for `DATABASE` type. A [$match](https://docs.mongodb.com/manual/reference/operator/aggregation/match/) expression document that MongoDB Realm includes in the underlying change stream pipeline for the trigger. This is useful when you want to filter change events beyond their operation type. The trigger will only fire if the expression evaluates to true for a given change event.
     */
    configMatch?: pulumi.Input<string>;
    /**
     * Required for `AUTHENTICATION` type. The [authentication operation type](https://www.mongodb.com/docs/atlas/atlas-ui/triggers/authentication-triggers/#authentication-events) to listen for. Possible Values: `LOGIN`, `CREATE`, `DELETE`
     */
    configOperationType?: pulumi.Input<string>;
    /**
     * Required for `DATABASE` type. The [database event operation types](https://www.mongodb.com/docs/atlas/atlas-ui/triggers/database-triggers/#std-label-atlas-database-event-operation-types) to listen for. This must contain at least one value. Possible Values: `INSERT`, `UPDATE`, `REPLACE`, `DELETE`
     */
    configOperationTypes?: pulumi.Input<pulumi.Input<string>[]>;
    /**
     * Optional for `DATABASE` type. A [$project](https://docs.mongodb.com/manual/reference/operator/aggregation/project/) expression document that Realm uses to filter the fields that appear in change event objects.
     */
    configProject?: pulumi.Input<string>;
    /**
     * Required for `AUTHENTICATION` type. A list of one or more [authentication provider](https://www.mongodb.com/docs/atlas/app-services/authentication/#authentication-providers-1) id values. The trigger will only listen for authentication events produced by these providers.
     */
    configProviders?: pulumi.Input<pulumi.Input<string>[]>;
    /**
     * Required for `SCHEDULED` type. A [cron expression](https://www.mongodb.com/docs/atlas/atlas-ui/triggers/scheduled-triggers/#cron-expressions) that defines the trigger schedule.
     */
    configSchedule?: pulumi.Input<string>;
    configScheduleType?: pulumi.Input<string>;
    /**
     * Required for `DATABASE` type. The ID of the MongoDB Service associated with the trigger.
     */
    configServiceId?: pulumi.Input<string>;
    /**
     * Default: `false` If `true`, the trigger is disabled.
     */
    disabled?: pulumi.Input<boolean>;
    /**
     * An object where each field name is an event processor ID and each value is an object that configures its corresponding event processor. The following event processors are supported: `AWS_EVENTBRIDGE` For an example configuration object, see [Send Trigger Events to AWS EventBridge](https://www.mongodb.com/docs/atlas/atlas-ui/triggers/aws-eventbridge/#send-trigger-events-to-aws-eventbridge).
     * * `event_processors.0.aws_eventbridge.config_account_id` - (Optional) AWS Account ID.
     * * `event_processors.0.aws_eventbridge.config_region` - (Optional) Region of AWS Account.
     */
    eventProcessors?: pulumi.Input<inputs.EventTriggerEventProcessors>;
    /**
     * The ID of the function associated with the trigger.
     */
    functionId?: pulumi.Input<string>;
    /**
     * The name of the function associated with the trigger.
     */
    functionName?: pulumi.Input<string>;
    /**
     * The name of the trigger.
     */
    name?: pulumi.Input<string>;
    /**
     * The unique ID for the project to create the trigger.
     */
    projectId?: pulumi.Input<string>;
    /**
     * The unique ID of the trigger.
     */
    triggerId?: pulumi.Input<string>;
    /**
     * The type of the trigger. Possible Values: `DATABASE`, `AUTHENTICATION`,`SCHEDULED`
     */
    type?: pulumi.Input<string>;
    /**
     * Only Available for Database Triggers. If true, event ordering is disabled and this trigger can process events in parallel. If false, event ordering is enabled and the trigger executes serially.
     */
    unordered?: pulumi.Input<boolean>;
}

/**
 * The set of arguments for constructing a EventTrigger resource.
 */
export interface EventTriggerArgs {
    /**
     * The ObjectID of your application.
     * * For more details on `projectId` and `appId` see: https://www.mongodb.com/docs/api/doc/atlas-app-services-admin-api-v3/#topic-project-amp-application-ids
     */
    appId: pulumi.Input<string>;
    /**
     * Optional for `DATABASE` type. The name of the MongoDB collection that the trigger watches for change events. The collection must be part of the specified database.
     */
    configCollection?: pulumi.Input<string>;
    /**
     * Required for `DATABASE` type. The name of the MongoDB database to watch.
     */
    configDatabase?: pulumi.Input<string>;
    /**
     * Optional for `DATABASE` type. If true, indicates that `UPDATE` change events should include the most current [majority-committed](https://docs.mongodb.com/manual/reference/read-concern-majority/) version of the modified document in the fullDocument field.
     */
    configFullDocument?: pulumi.Input<boolean>;
    configFullDocumentBefore?: pulumi.Input<boolean>;
    /**
     * Optional for `DATABASE` type. A [$match](https://docs.mongodb.com/manual/reference/operator/aggregation/match/) expression document that MongoDB Realm includes in the underlying change stream pipeline for the trigger. This is useful when you want to filter change events beyond their operation type. The trigger will only fire if the expression evaluates to true for a given change event.
     */
    configMatch?: pulumi.Input<string>;
    /**
     * Required for `AUTHENTICATION` type. The [authentication operation type](https://www.mongodb.com/docs/atlas/atlas-ui/triggers/authentication-triggers/#authentication-events) to listen for. Possible Values: `LOGIN`, `CREATE`, `DELETE`
     */
    configOperationType?: pulumi.Input<string>;
    /**
     * Required for `DATABASE` type. The [database event operation types](https://www.mongodb.com/docs/atlas/atlas-ui/triggers/database-triggers/#std-label-atlas-database-event-operation-types) to listen for. This must contain at least one value. Possible Values: `INSERT`, `UPDATE`, `REPLACE`, `DELETE`
     */
    configOperationTypes?: pulumi.Input<pulumi.Input<string>[]>;
    /**
     * Optional for `DATABASE` type. A [$project](https://docs.mongodb.com/manual/reference/operator/aggregation/project/) expression document that Realm uses to filter the fields that appear in change event objects.
     */
    configProject?: pulumi.Input<string>;
    /**
     * Required for `AUTHENTICATION` type. A list of one or more [authentication provider](https://www.mongodb.com/docs/atlas/app-services/authentication/#authentication-providers-1) id values. The trigger will only listen for authentication events produced by these providers.
     */
    configProviders?: pulumi.Input<pulumi.Input<string>[]>;
    /**
     * Required for `SCHEDULED` type. A [cron expression](https://www.mongodb.com/docs/atlas/atlas-ui/triggers/scheduled-triggers/#cron-expressions) that defines the trigger schedule.
     */
    configSchedule?: pulumi.Input<string>;
    /**
     * Required for `DATABASE` type. The ID of the MongoDB Service associated with the trigger.
     */
    configServiceId?: pulumi.Input<string>;
    /**
     * Default: `false` If `true`, the trigger is disabled.
     */
    disabled?: pulumi.Input<boolean>;
    /**
     * An object where each field name is an event processor ID and each value is an object that configures its corresponding event processor. The following event processors are supported: `AWS_EVENTBRIDGE` For an example configuration object, see [Send Trigger Events to AWS EventBridge](https://www.mongodb.com/docs/atlas/atlas-ui/triggers/aws-eventbridge/#send-trigger-events-to-aws-eventbridge).
     * * `event_processors.0.aws_eventbridge.config_account_id` - (Optional) AWS Account ID.
     * * `event_processors.0.aws_eventbridge.config_region` - (Optional) Region of AWS Account.
     */
    eventProcessors?: pulumi.Input<inputs.EventTriggerEventProcessors>;
    /**
     * The ID of the function associated with the trigger.
     */
    functionId?: pulumi.Input<string>;
    /**
     * The name of the trigger.
     */
    name?: pulumi.Input<string>;
    /**
     * The unique ID for the project to create the trigger.
     */
    projectId: pulumi.Input<string>;
    /**
     * The type of the trigger. Possible Values: `DATABASE`, `AUTHENTICATION`,`SCHEDULED`
     */
    type: pulumi.Input<string>;
    /**
     * Only Available for Database Triggers. If true, event ordering is disabled and this trigger can process events in parallel. If false, event ordering is enabled and the trigger executes serially.
     */
    unordered?: pulumi.Input<boolean>;
}
