# coding=utf-8
# *** WARNING: this file was generated by pulumi-language-python. ***
# *** Do not edit by hand unless you're certain you know what you are doing! ***

import builtins as _builtins
import warnings
import sys
import pulumi
import pulumi.runtime
from typing import Any, Mapping, Optional, Sequence, Union, overload
if sys.version_info >= (3, 11):
    from typing import NotRequired, TypedDict, TypeAlias
else:
    from typing_extensions import NotRequired, TypedDict, TypeAlias
from . import _utilities
from . import outputs

__all__ = [
    'GetLogIntegrationsResult',
    'AwaitableGetLogIntegrationsResult',
    'get_log_integrations',
    'get_log_integrations_output',
]

@pulumi.output_type
class GetLogIntegrationsResult:
    """
    A collection of values returned by getLogIntegrations.
    """
    def __init__(__self__, id=None, integration_type=None, project_id=None, results=None):
        if id and not isinstance(id, str):
            raise TypeError("Expected argument 'id' to be a str")
        pulumi.set(__self__, "id", id)
        if integration_type and not isinstance(integration_type, str):
            raise TypeError("Expected argument 'integration_type' to be a str")
        pulumi.set(__self__, "integration_type", integration_type)
        if project_id and not isinstance(project_id, str):
            raise TypeError("Expected argument 'project_id' to be a str")
        pulumi.set(__self__, "project_id", project_id)
        if results and not isinstance(results, list):
            raise TypeError("Expected argument 'results' to be a list")
        pulumi.set(__self__, "results", results)

    @_builtins.property
    @pulumi.getter
    def id(self) -> _builtins.str:
        """
        The provider-assigned unique ID for this managed resource.
        """
        return pulumi.get(self, "id")

    @_builtins.property
    @pulumi.getter(name="integrationType")
    def integration_type(self) -> Optional[_builtins.str]:
        """
        Optional filter by integration type (e.g., 'S3*LOG*EXPORT').
        """
        return pulumi.get(self, "integration_type")

    @_builtins.property
    @pulumi.getter(name="projectId")
    def project_id(self) -> _builtins.str:
        """
        Unique 24-hexadecimal digit string that identifies your project.
        """
        return pulumi.get(self, "project_id")

    @_builtins.property
    @pulumi.getter
    def results(self) -> Sequence['outputs.GetLogIntegrationsResultResult']:
        """
        List of returned documents that MongoDB Cloud provides when completing this request.
        """
        return pulumi.get(self, "results")


class AwaitableGetLogIntegrationsResult(GetLogIntegrationsResult):
    # pylint: disable=using-constant-test
    def __await__(self):
        if False:
            yield self
        return GetLogIntegrationsResult(
            id=self.id,
            integration_type=self.integration_type,
            project_id=self.project_id,
            results=self.results)


def get_log_integrations(integration_type: Optional[_builtins.str] = None,
                         project_id: Optional[_builtins.str] = None,
                         opts: Optional[pulumi.InvokeOptions] = None) -> AwaitableGetLogIntegrationsResult:
    """
    `get_log_integrations` returns all log integrations in a project. Log integrations allow you to continually export `mongod`, `mongos`, and audit logs to an AWS S3 bucket with 1-minute log export intervals.

    To use this data source, the requesting Service Account or API Key must have the Organization Owner or Project Owner role.

    ## Example Usage

    ### S
    ```python
    import pulumi
    import pulumi_mongodbatlas as mongodbatlas

    project = mongodbatlas.Project("project",
        name=atlas_project_name,
        org_id=atlas_org_id)
    # Set up cloud provider access in Atlas using the created IAM role
    setup_only = mongodbatlas.CloudProviderAccessSetup("setup_only",
        project_id=project.id,
        provider_name="AWS")
    auth_role = mongodbatlas.CloudProviderAccessAuthorization("auth_role",
        project_id=project.id,
        role_id=setup_only.role_id,
        aws={
            "iam_assumed_role_arn": atlas_role["arn"],
        })
    # Set up log integration with authorized IAM role
    example_log_integration = mongodbatlas.LogIntegration("example",
        project_id=project.id,
        bucket_name=log_bucket["bucket"],
        iam_role_id=auth_role.role_id,
        prefix_path="atlas-logs",
        type="S3_LOG_EXPORT",
        log_types=["MONGOD_AUDIT"])
    example = mongodbatlas.get_log_integration_output(project_id=example_log_integration.project_id,
        integration_id=example_log_integration.integration_id)
    example_get_log_integrations = mongodbatlas.get_log_integrations_output(project_id=example_log_integration.project_id)
    pulumi.export("logIntegrationBucketName", example.bucket_name)
    pulumi.export("logIntegrationsResults", example_get_log_integrations.results)
    ```


    :param _builtins.str integration_type: Optional filter by integration type (e.g., 'S3*LOG*EXPORT').
    :param _builtins.str project_id: Unique 24-hexadecimal digit string that identifies your project.
    """
    __args__ = dict()
    __args__['integrationType'] = integration_type
    __args__['projectId'] = project_id
    opts = pulumi.InvokeOptions.merge(_utilities.get_invoke_opts_defaults(), opts)
    __ret__ = pulumi.runtime.invoke('mongodbatlas:index/getLogIntegrations:getLogIntegrations', __args__, opts=opts, typ=GetLogIntegrationsResult).value

    return AwaitableGetLogIntegrationsResult(
        id=pulumi.get(__ret__, 'id'),
        integration_type=pulumi.get(__ret__, 'integration_type'),
        project_id=pulumi.get(__ret__, 'project_id'),
        results=pulumi.get(__ret__, 'results'))
def get_log_integrations_output(integration_type: Optional[pulumi.Input[Optional[_builtins.str]]] = None,
                                project_id: Optional[pulumi.Input[_builtins.str]] = None,
                                opts: Optional[Union[pulumi.InvokeOptions, pulumi.InvokeOutputOptions]] = None) -> pulumi.Output[GetLogIntegrationsResult]:
    """
    `get_log_integrations` returns all log integrations in a project. Log integrations allow you to continually export `mongod`, `mongos`, and audit logs to an AWS S3 bucket with 1-minute log export intervals.

    To use this data source, the requesting Service Account or API Key must have the Organization Owner or Project Owner role.

    ## Example Usage

    ### S
    ```python
    import pulumi
    import pulumi_mongodbatlas as mongodbatlas

    project = mongodbatlas.Project("project",
        name=atlas_project_name,
        org_id=atlas_org_id)
    # Set up cloud provider access in Atlas using the created IAM role
    setup_only = mongodbatlas.CloudProviderAccessSetup("setup_only",
        project_id=project.id,
        provider_name="AWS")
    auth_role = mongodbatlas.CloudProviderAccessAuthorization("auth_role",
        project_id=project.id,
        role_id=setup_only.role_id,
        aws={
            "iam_assumed_role_arn": atlas_role["arn"],
        })
    # Set up log integration with authorized IAM role
    example_log_integration = mongodbatlas.LogIntegration("example",
        project_id=project.id,
        bucket_name=log_bucket["bucket"],
        iam_role_id=auth_role.role_id,
        prefix_path="atlas-logs",
        type="S3_LOG_EXPORT",
        log_types=["MONGOD_AUDIT"])
    example = mongodbatlas.get_log_integration_output(project_id=example_log_integration.project_id,
        integration_id=example_log_integration.integration_id)
    example_get_log_integrations = mongodbatlas.get_log_integrations_output(project_id=example_log_integration.project_id)
    pulumi.export("logIntegrationBucketName", example.bucket_name)
    pulumi.export("logIntegrationsResults", example_get_log_integrations.results)
    ```


    :param _builtins.str integration_type: Optional filter by integration type (e.g., 'S3*LOG*EXPORT').
    :param _builtins.str project_id: Unique 24-hexadecimal digit string that identifies your project.
    """
    __args__ = dict()
    __args__['integrationType'] = integration_type
    __args__['projectId'] = project_id
    opts = pulumi.InvokeOutputOptions.merge(_utilities.get_invoke_opts_defaults(), opts)
    __ret__ = pulumi.runtime.invoke_output('mongodbatlas:index/getLogIntegrations:getLogIntegrations', __args__, opts=opts, typ=GetLogIntegrationsResult)
    return __ret__.apply(lambda __response__: GetLogIntegrationsResult(
        id=pulumi.get(__response__, 'id'),
        integration_type=pulumi.get(__response__, 'integration_type'),
        project_id=pulumi.get(__response__, 'project_id'),
        results=pulumi.get(__response__, 'results')))
