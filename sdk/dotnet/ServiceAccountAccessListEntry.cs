// *** WARNING: this file was generated by pulumi-language-dotnet. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

using System;
using System.Collections.Generic;
using System.Collections.Immutable;
using System.Threading.Tasks;
using Pulumi.Serialization;

namespace Pulumi.Mongodbatlas
{
    /// <summary>
    /// `mongodbatlas.ServiceAccountAccessListEntry` provides an Access List entry resource for Service Accounts. The resource lets you create, delete, and import an Access List entry for the specified Service Account.
    /// 
    /// &gt; **IMPORTANT:** When you remove an entry from the access list, existing connections from the removed address(es) may remain open for a variable amount of time. How much time passes before Atlas closes the connection depends on several factors, including how the connection was established, the particular behavior of the application or driver using the address, and the connection protocol (e.g., TCP or UDP). This is particularly important to consider when changing an existing IP address or CIDR block as they cannot be updated via the Provider, hence a change will force the destruction and recreation of entries.
    /// 
    /// &gt; **IMPORTANT WARNING:** Managing Service Accounts with Terraform **exposes sensitive organizational secrets** in Terraform's state. We suggest following Terraform's best practices.
    /// 
    /// ## Example Usage
    /// 
    /// ### S
    /// 
    /// ```csharp
    /// using System.Collections.Generic;
    /// using System.Linq;
    /// using Pulumi;
    /// using Mongodbatlas = Pulumi.Mongodbatlas;
    /// 
    /// return await Deployment.RunAsync(() =&gt; 
    /// {
    ///     var thisServiceAccount = new Mongodbatlas.ServiceAccount("this", new()
    ///     {
    ///         OrgId = orgId,
    ///         Name = "example-service-account",
    ///         Description = "Example Service Account",
    ///         Roles = new[]
    ///         {
    ///             "ORG_READ_ONLY",
    ///         },
    ///         SecretExpiresAfterHours = 2160,
    ///     });
    /// 
    ///     // Add IP Access List Entry to Service Account using CIDR Block
    ///     var cidr = new Mongodbatlas.ServiceAccountAccessListEntry("cidr", new()
    ///     {
    ///         OrgId = orgId,
    ///         ClientId = thisServiceAccount.ClientId,
    ///         CidrBlock = "1.2.3.4/32",
    ///     });
    /// 
    ///     // Add IP Access List Entry to Service Account using IP Address
    ///     var ip = new Mongodbatlas.ServiceAccountAccessListEntry("ip", new()
    ///     {
    ///         OrgId = orgId,
    ///         ClientId = thisServiceAccount.ClientId,
    ///         IpAddress = "2.3.4.5",
    ///     });
    /// 
    ///     // Data source to read a single Access List entry for the Service Account
    ///     var @this = Mongodbatlas.GetServiceAccountAccessListEntry.Invoke(new()
    ///     {
    ///         OrgId = cidr.OrgId,
    ///         ClientId = cidr.ClientId,
    ///         CidrBlock = cidr.CidrBlock,
    ///     });
    /// 
    ///     // Data source to read all Access List entries for the Service Account
    ///     var thisGetServiceAccountAccessListEntries = Mongodbatlas.GetServiceAccountAccessListEntries.Invoke(new()
    ///     {
    ///         OrgId = thisServiceAccount.OrgId,
    ///         ClientId = thisServiceAccount.ClientId,
    ///     });
    /// 
    ///     return new Dictionary&lt;string, object?&gt;
    ///     {
    ///         ["accessListEntryCidrBlock"] = @this.Apply(@this =&gt; @this.Apply(getServiceAccountAccessListEntryResult =&gt; getServiceAccountAccessListEntryResult.CidrBlock)),
    ///         ["allAccessListEntries"] = thisGetServiceAccountAccessListEntries.Apply(getServiceAccountAccessListEntriesResult =&gt; getServiceAccountAccessListEntriesResult.Results),
    ///     };
    /// });
    /// ```
    /// 
    /// ## Import
    /// 
    /// Access List entries for Service Accounts can be imported using the `OrgId`, `ClientId` and `CidrBlock` or `IpAddress`, e.g.
    /// 
    /// ```sh
    /// $ pulumi import mongodbatlas:index/serviceAccountAccessListEntry:ServiceAccountAccessListEntry test 5d0f1f74cf09a29120e123cd-mdb_sa_id_1234567890abcdef12345678-10.242.88.0/21
    /// ```
    /// 
    /// For more information, see [Add Access List Entries for One Organization Service Account](https://www.mongodb.com/docs/api/doc/atlas-admin-api-v2/operation/operation-createorgserviceaccountaccesslist) in the MongoDB Atlas API documentation.
    /// </summary>
    [MongodbatlasResourceType("mongodbatlas:index/serviceAccountAccessListEntry:ServiceAccountAccessListEntry")]
    public partial class ServiceAccountAccessListEntry : global::Pulumi.CustomResource
    {
        /// <summary>
        /// Range of IP addresses in CIDR notation to be added to the access list. You can set a value for this parameter or **ip_address**, but not for both.
        /// </summary>
        [Output("cidrBlock")]
        public Output<string> CidrBlock { get; private set; } = null!;

        /// <summary>
        /// The Client ID of the Service Account.
        /// </summary>
        [Output("clientId")]
        public Output<string> ClientId { get; private set; } = null!;

        /// <summary>
        /// Date the entry was added to the access list. This attribute expresses its value in the ISO 8601 timestamp format in UTC.
        /// </summary>
        [Output("createdAt")]
        public Output<string> CreatedAt { get; private set; } = null!;

        /// <summary>
        /// IP address to be added to the access list. You can set a value for this parameter or **cidr_block**, but not for both.
        /// </summary>
        [Output("ipAddress")]
        public Output<string> IpAddress { get; private set; } = null!;

        /// <summary>
        /// Network address that issued the most recent request to the API.
        /// </summary>
        [Output("lastUsedAddress")]
        public Output<string> LastUsedAddress { get; private set; } = null!;

        /// <summary>
        /// Date when the API received the most recent request that originated from this network address.
        /// </summary>
        [Output("lastUsedAt")]
        public Output<string> LastUsedAt { get; private set; } = null!;

        /// <summary>
        /// Unique 24-hexadecimal digit string that identifies the organization that contains your projects.
        /// </summary>
        [Output("orgId")]
        public Output<string> OrgId { get; private set; } = null!;

        /// <summary>
        /// The number of requests that has originated from this network address.
        /// </summary>
        [Output("requestCount")]
        public Output<int> RequestCount { get; private set; } = null!;


        /// <summary>
        /// Create a ServiceAccountAccessListEntry resource with the given unique name, arguments, and options.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resource</param>
        /// <param name="args">The arguments used to populate this resource's properties</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public ServiceAccountAccessListEntry(string name, ServiceAccountAccessListEntryArgs args, CustomResourceOptions? options = null)
            : base("mongodbatlas:index/serviceAccountAccessListEntry:ServiceAccountAccessListEntry", name, args ?? new ServiceAccountAccessListEntryArgs(), MakeResourceOptions(options, ""))
        {
        }

        private ServiceAccountAccessListEntry(string name, Input<string> id, ServiceAccountAccessListEntryState? state = null, CustomResourceOptions? options = null)
            : base("mongodbatlas:index/serviceAccountAccessListEntry:ServiceAccountAccessListEntry", name, state, MakeResourceOptions(options, id))
        {
        }

        private static CustomResourceOptions MakeResourceOptions(CustomResourceOptions? options, Input<string>? id)
        {
            var defaultOptions = new CustomResourceOptions
            {
                Version = Utilities.Version,
            };
            var merged = CustomResourceOptions.Merge(defaultOptions, options);
            // Override the ID if one was specified for consistency with other language SDKs.
            merged.Id = id ?? merged.Id;
            return merged;
        }
        /// <summary>
        /// Get an existing ServiceAccountAccessListEntry resource's state with the given name, ID, and optional extra
        /// properties used to qualify the lookup.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resulting resource.</param>
        /// <param name="id">The unique provider ID of the resource to lookup.</param>
        /// <param name="state">Any extra arguments used during the lookup.</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public static ServiceAccountAccessListEntry Get(string name, Input<string> id, ServiceAccountAccessListEntryState? state = null, CustomResourceOptions? options = null)
        {
            return new ServiceAccountAccessListEntry(name, id, state, options);
        }
    }

    public sealed class ServiceAccountAccessListEntryArgs : global::Pulumi.ResourceArgs
    {
        /// <summary>
        /// Range of IP addresses in CIDR notation to be added to the access list. You can set a value for this parameter or **ip_address**, but not for both.
        /// </summary>
        [Input("cidrBlock")]
        public Input<string>? CidrBlock { get; set; }

        /// <summary>
        /// The Client ID of the Service Account.
        /// </summary>
        [Input("clientId", required: true)]
        public Input<string> ClientId { get; set; } = null!;

        /// <summary>
        /// IP address to be added to the access list. You can set a value for this parameter or **cidr_block**, but not for both.
        /// </summary>
        [Input("ipAddress")]
        public Input<string>? IpAddress { get; set; }

        /// <summary>
        /// Unique 24-hexadecimal digit string that identifies the organization that contains your projects.
        /// </summary>
        [Input("orgId", required: true)]
        public Input<string> OrgId { get; set; } = null!;

        public ServiceAccountAccessListEntryArgs()
        {
        }
        public static new ServiceAccountAccessListEntryArgs Empty => new ServiceAccountAccessListEntryArgs();
    }

    public sealed class ServiceAccountAccessListEntryState : global::Pulumi.ResourceArgs
    {
        /// <summary>
        /// Range of IP addresses in CIDR notation to be added to the access list. You can set a value for this parameter or **ip_address**, but not for both.
        /// </summary>
        [Input("cidrBlock")]
        public Input<string>? CidrBlock { get; set; }

        /// <summary>
        /// The Client ID of the Service Account.
        /// </summary>
        [Input("clientId")]
        public Input<string>? ClientId { get; set; }

        /// <summary>
        /// Date the entry was added to the access list. This attribute expresses its value in the ISO 8601 timestamp format in UTC.
        /// </summary>
        [Input("createdAt")]
        public Input<string>? CreatedAt { get; set; }

        /// <summary>
        /// IP address to be added to the access list. You can set a value for this parameter or **cidr_block**, but not for both.
        /// </summary>
        [Input("ipAddress")]
        public Input<string>? IpAddress { get; set; }

        /// <summary>
        /// Network address that issued the most recent request to the API.
        /// </summary>
        [Input("lastUsedAddress")]
        public Input<string>? LastUsedAddress { get; set; }

        /// <summary>
        /// Date when the API received the most recent request that originated from this network address.
        /// </summary>
        [Input("lastUsedAt")]
        public Input<string>? LastUsedAt { get; set; }

        /// <summary>
        /// Unique 24-hexadecimal digit string that identifies the organization that contains your projects.
        /// </summary>
        [Input("orgId")]
        public Input<string>? OrgId { get; set; }

        /// <summary>
        /// The number of requests that has originated from this network address.
        /// </summary>
        [Input("requestCount")]
        public Input<int>? RequestCount { get; set; }

        public ServiceAccountAccessListEntryState()
        {
        }
        public static new ServiceAccountAccessListEntryState Empty => new ServiceAccountAccessListEntryState();
    }
}
