// *** WARNING: this file was generated by pulumi-language-dotnet. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

using System;
using System.Collections.Generic;
using System.Collections.Immutable;
using System.Threading.Tasks;
using Pulumi.Serialization;

namespace Pulumi.Mongodbatlas
{
    /// <summary>
    /// `mongodbatlas.LogIntegration` provides a resource for managing log integration configurations at the project level. This resource allows you to continually export `Mongod`, `Mongos`, and audit logs to an AWS S3 bucket with 1-minute log export intervals.
    /// 
    /// To use this resource, the requesting Service Account or API Key must have the Organization Owner or Project Owner role.
    /// 
    /// ## Example Usage
    /// 
    /// ```csharp
    /// using System.Collections.Generic;
    /// using System.Linq;
    /// using Pulumi;
    /// using Mongodbatlas = Pulumi.Mongodbatlas;
    /// 
    /// return await Deployment.RunAsync(() =&gt; 
    /// {
    ///     var project = new Mongodbatlas.Project("project", new()
    ///     {
    ///         Name = atlasProjectName,
    ///         OrgId = atlasOrgId,
    ///     });
    /// 
    ///     // Set up cloud provider access in Atlas using the created IAM role
    ///     var setupOnly = new Mongodbatlas.CloudProviderAccessSetup("setup_only", new()
    ///     {
    ///         ProjectId = project.Id,
    ///         ProviderName = "AWS",
    ///     });
    /// 
    ///     var authRole = new Mongodbatlas.CloudProviderAccessAuthorization("auth_role", new()
    ///     {
    ///         ProjectId = project.Id,
    ///         RoleId = setupOnly.RoleId,
    ///         Aws = new Mongodbatlas.Inputs.CloudProviderAccessAuthorizationAwsArgs
    ///         {
    ///             IamAssumedRoleArn = atlasRole.Arn,
    ///         },
    ///     });
    /// 
    ///     // Set up log integration with authorized IAM role
    ///     var exampleLogIntegration = new Mongodbatlas.LogIntegration("example", new()
    ///     {
    ///         ProjectId = project.Id,
    ///         BucketName = logBucket.Bucket,
    ///         IamRoleId = authRole.RoleId,
    ///         PrefixPath = "atlas-logs",
    ///         Type = "S3_LOG_EXPORT",
    ///         LogTypes = new[]
    ///         {
    ///             "MONGOD_AUDIT",
    ///         },
    ///     });
    /// 
    ///     var example = Mongodbatlas.GetLogIntegration.Invoke(new()
    ///     {
    ///         ProjectId = exampleLogIntegration.ProjectId,
    ///         IntegrationId = exampleLogIntegration.IntegrationId,
    ///     });
    /// 
    ///     var exampleGetLogIntegrations = Mongodbatlas.GetLogIntegrations.Invoke(new()
    ///     {
    ///         ProjectId = exampleLogIntegration.ProjectId,
    ///     });
    /// 
    ///     return new Dictionary&lt;string, object?&gt;
    ///     {
    ///         ["logIntegrationBucketName"] = example.Apply(getLogIntegrationResult =&gt; getLogIntegrationResult.BucketName),
    ///         ["logIntegrationsResults"] = exampleGetLogIntegrations.Apply(getLogIntegrationsResult =&gt; getLogIntegrationsResult.Results),
    ///     };
    /// });
    /// ```
    /// 
    /// ## Import
    /// 
    /// Log integration resource can be imported using the project ID and log integration ID, separated by a slash, e.g.
    /// 
    /// For more information see: [MongoDB Atlas API - Log Integration](https://www.mongodb.com/docs/api/doc/atlas-admin-api-v2/group/endpoint-push-based-log-export) Documentation.
    /// </summary>
    [MongodbatlasResourceType("mongodbatlas:index/logIntegration:LogIntegration")]
    public partial class LogIntegration : global::Pulumi.CustomResource
    {
        /// <summary>
        /// Human-readable label that identifies the S3 bucket name for storing log files.
        /// </summary>
        [Output("bucketName")]
        public Output<string> BucketName { get; private set; } = null!;

        /// <summary>
        /// Unique 24-hexadecimal digit string that identifies the AWS IAM role that MongoDB Cloud uses to access your S3 bucket.
        /// </summary>
        [Output("iamRoleId")]
        public Output<string> IamRoleId { get; private set; } = null!;

        /// <summary>
        /// Unique 24-character hexadecimal digit string that identifies the log integration configuration.
        /// </summary>
        [Output("integrationId")]
        public Output<string> IntegrationId { get; private set; } = null!;

        /// <summary>
        /// AWS KMS key ID or ARN for server-side encryption (optional). If not provided, uses bucket default encryption settings.
        /// </summary>
        [Output("kmsKey")]
        public Output<string?> KmsKey { get; private set; } = null!;

        /// <summary>
        /// Array of log types to export to S3. Valid values: MONGOD, MONGOS, MONGOD*AUDIT, MONGOS*AUDIT.
        /// </summary>
        [Output("logTypes")]
        public Output<ImmutableArray<string>> LogTypes { get; private set; } = null!;

        /// <summary>
        /// S3 directory path prefix where the log files will be stored. MongoDB Cloud will add further sub-directories based on the log type.
        /// </summary>
        [Output("prefixPath")]
        public Output<string> PrefixPath { get; private set; } = null!;

        /// <summary>
        /// Unique 24-hexadecimal digit string that identifies your project.
        /// </summary>
        [Output("projectId")]
        public Output<string> ProjectId { get; private set; } = null!;

        /// <summary>
        /// Human-readable label that identifies the service to which you want to integrate with MongoDB Cloud. The value must match the log integration type.
        /// </summary>
        [Output("type")]
        public Output<string> Type { get; private set; } = null!;


        /// <summary>
        /// Create a LogIntegration resource with the given unique name, arguments, and options.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resource</param>
        /// <param name="args">The arguments used to populate this resource's properties</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public LogIntegration(string name, LogIntegrationArgs args, CustomResourceOptions? options = null)
            : base("mongodbatlas:index/logIntegration:LogIntegration", name, args ?? new LogIntegrationArgs(), MakeResourceOptions(options, ""))
        {
        }

        private LogIntegration(string name, Input<string> id, LogIntegrationState? state = null, CustomResourceOptions? options = null)
            : base("mongodbatlas:index/logIntegration:LogIntegration", name, state, MakeResourceOptions(options, id))
        {
        }

        private static CustomResourceOptions MakeResourceOptions(CustomResourceOptions? options, Input<string>? id)
        {
            var defaultOptions = new CustomResourceOptions
            {
                Version = Utilities.Version,
            };
            var merged = CustomResourceOptions.Merge(defaultOptions, options);
            // Override the ID if one was specified for consistency with other language SDKs.
            merged.Id = id ?? merged.Id;
            return merged;
        }
        /// <summary>
        /// Get an existing LogIntegration resource's state with the given name, ID, and optional extra
        /// properties used to qualify the lookup.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resulting resource.</param>
        /// <param name="id">The unique provider ID of the resource to lookup.</param>
        /// <param name="state">Any extra arguments used during the lookup.</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public static LogIntegration Get(string name, Input<string> id, LogIntegrationState? state = null, CustomResourceOptions? options = null)
        {
            return new LogIntegration(name, id, state, options);
        }
    }

    public sealed class LogIntegrationArgs : global::Pulumi.ResourceArgs
    {
        /// <summary>
        /// Human-readable label that identifies the S3 bucket name for storing log files.
        /// </summary>
        [Input("bucketName", required: true)]
        public Input<string> BucketName { get; set; } = null!;

        /// <summary>
        /// Unique 24-hexadecimal digit string that identifies the AWS IAM role that MongoDB Cloud uses to access your S3 bucket.
        /// </summary>
        [Input("iamRoleId", required: true)]
        public Input<string> IamRoleId { get; set; } = null!;

        /// <summary>
        /// AWS KMS key ID or ARN for server-side encryption (optional). If not provided, uses bucket default encryption settings.
        /// </summary>
        [Input("kmsKey")]
        public Input<string>? KmsKey { get; set; }

        [Input("logTypes", required: true)]
        private InputList<string>? _logTypes;

        /// <summary>
        /// Array of log types to export to S3. Valid values: MONGOD, MONGOS, MONGOD*AUDIT, MONGOS*AUDIT.
        /// </summary>
        public InputList<string> LogTypes
        {
            get => _logTypes ?? (_logTypes = new InputList<string>());
            set => _logTypes = value;
        }

        /// <summary>
        /// S3 directory path prefix where the log files will be stored. MongoDB Cloud will add further sub-directories based on the log type.
        /// </summary>
        [Input("prefixPath", required: true)]
        public Input<string> PrefixPath { get; set; } = null!;

        /// <summary>
        /// Unique 24-hexadecimal digit string that identifies your project.
        /// </summary>
        [Input("projectId", required: true)]
        public Input<string> ProjectId { get; set; } = null!;

        /// <summary>
        /// Human-readable label that identifies the service to which you want to integrate with MongoDB Cloud. The value must match the log integration type.
        /// </summary>
        [Input("type", required: true)]
        public Input<string> Type { get; set; } = null!;

        public LogIntegrationArgs()
        {
        }
        public static new LogIntegrationArgs Empty => new LogIntegrationArgs();
    }

    public sealed class LogIntegrationState : global::Pulumi.ResourceArgs
    {
        /// <summary>
        /// Human-readable label that identifies the S3 bucket name for storing log files.
        /// </summary>
        [Input("bucketName")]
        public Input<string>? BucketName { get; set; }

        /// <summary>
        /// Unique 24-hexadecimal digit string that identifies the AWS IAM role that MongoDB Cloud uses to access your S3 bucket.
        /// </summary>
        [Input("iamRoleId")]
        public Input<string>? IamRoleId { get; set; }

        /// <summary>
        /// Unique 24-character hexadecimal digit string that identifies the log integration configuration.
        /// </summary>
        [Input("integrationId")]
        public Input<string>? IntegrationId { get; set; }

        /// <summary>
        /// AWS KMS key ID or ARN for server-side encryption (optional). If not provided, uses bucket default encryption settings.
        /// </summary>
        [Input("kmsKey")]
        public Input<string>? KmsKey { get; set; }

        [Input("logTypes")]
        private InputList<string>? _logTypes;

        /// <summary>
        /// Array of log types to export to S3. Valid values: MONGOD, MONGOS, MONGOD*AUDIT, MONGOS*AUDIT.
        /// </summary>
        public InputList<string> LogTypes
        {
            get => _logTypes ?? (_logTypes = new InputList<string>());
            set => _logTypes = value;
        }

        /// <summary>
        /// S3 directory path prefix where the log files will be stored. MongoDB Cloud will add further sub-directories based on the log type.
        /// </summary>
        [Input("prefixPath")]
        public Input<string>? PrefixPath { get; set; }

        /// <summary>
        /// Unique 24-hexadecimal digit string that identifies your project.
        /// </summary>
        [Input("projectId")]
        public Input<string>? ProjectId { get; set; }

        /// <summary>
        /// Human-readable label that identifies the service to which you want to integrate with MongoDB Cloud. The value must match the log integration type.
        /// </summary>
        [Input("type")]
        public Input<string>? Type { get; set; }

        public LogIntegrationState()
        {
        }
        public static new LogIntegrationState Empty => new LogIntegrationState();
    }
}
